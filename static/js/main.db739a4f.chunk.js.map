{"version":3,"sources":["components/error-alert/error-alert.module.css","components/price/price.module.css","components/modal-overlay/modal-overlay.module.css","pages/feed-order-page/feed-order-page.module.css","components/spinner/spinner.module.css","components/menu-list/menu-list.module.css","components/tab-bar/tab-bar.module.css","pages/main-page/index.module.css","pages/registration-page/registration-form.module.css","pages/sign-in-page/sign-in-form.module.css","components/feed-order-details/feed-order-details.module.css","hooks/hooks.ts","adapter/adapter.ts","utils/constants.ts","utils/common.ts","services/api.ts","store/slices/ingredients-slice.ts","components/logo/logo.tsx","components/main-nav/main-nav.tsx","components/user-nav/user-nav.tsx","components/app-header/app-header.tsx","components/error-alert/error-alert.tsx","components/ingredient-preview/ingredient-preview.tsx","components/price/price.tsx","components/feed-order-details/feed-order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/feed-order-modal/feed-order-modal.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient-modal/ingredient-modal.tsx","pages/feed-order-page/feed-order-page.tsx","store/action-types/ws-init-actions.ts","store/slices/ws-orders-feed-slice.ts","store/action-types/ws-orders-feed-actions.ts","store/slices/ws-user-feed-slice.ts","store/action-types/index.ts","store/action-types/ws-user-feed-actions.ts","components/order-card/order-card.tsx","components/orders-feed/orders-feed.tsx","components/orders-status/orders-status.tsx","components/spinner/spinner.tsx","pages/feed-page/feed-page.tsx","store/slices/password-slice.ts","components/form/form.tsx","pages/forgot-password-page/forgot-password-form.tsx","components/password-page-wrapper/password-page-wrapper.tsx","pages/forgot-password-page/index.tsx","pages/ingredient-page/ingredient-page.tsx","store/slices/burger-constructor-slice.ts","store/slices/order-slice.ts","components/constructor-item/constructor-item.tsx","components/order-details/order-details.tsx","components/burger-constructor/burger-constructor.tsx","store/slices/tab-slice.ts","components/counter/counter.tsx","components/menu-item/menu-item.tsx","components/menu-sublist/menu-sublist.tsx","components/menu-list/menu-list.tsx","components/tab-bar/tab-bar.tsx","components/burger-ingredients/burger-ingredients.tsx","pages/main-page/main-wrapper.tsx","pages/main-page/index.tsx","store/slices/user-slice.ts","components/profile-nav/profile-nav.tsx","pages/profile-feed-page/profile-feed-page.tsx","pages/profile-page/profile-form.tsx","pages/profile-page/index.tsx","pages/registration-page/registration-form.tsx","pages/registration-page/index.tsx","pages/reset-password-page/reset-password-form.tsx","pages/reset-password-page/index.tsx","pages/sign-in-page/sign-in-form.tsx","pages/sign-in-page/index.tsx","components/protected-route/protected-route.tsx","components/app/app.tsx","services/ws-service.ts","store/middlewares/socket-middleware.ts","store/slices/ingredient-slice.ts","store/slices/root-reducer.ts","store/index.ts","index.tsx","components/order-card/order-card.module.css","components/burger-constructor/burger-constructor.module.css","components/profile-nav/profile-nav.module.css","components/main-nav/main-nav.module.css","components/orders-status/orders-status.module.css","components/order-details/order-details.module.css","components/menu-item/menu-item.module.css","pages/sign-in-page/index.module.css","components/app-header/app-header.module.css","components/user-nav/user-nav.module.css","components/ingredient-details/ingredients-details.module.css","pages/feed-page/feed-page.module.css","components/password-page-wrapper/password-page-wrapper.module.css","pages/registration-page/index.module.css","components/modal/modal.module.css","components/orders-feed/orders-feed.module.css","pages/main-page/main-wrapper.module.css","pages/profile-feed-page/profile-feed-page.module.css","pages/profile-page/profile-form.module.css","pages/profile-page/index.module.css","components/logo/logo.module.css","components/ingredient-preview/ingredient-preview.module.css","components/form/form.module.css","pages/ingredient-page/ingredient-page.module.css","components/constructor-item/constructor-item.module.css","components/menu-sublist/menu-sublist.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app/app.module.css"],"names":["module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","adaptIngredientToClient","ingredient","adaptedIngredient","imageLarge","imageMobile","TABS","bun","main","sauce","ApiRoutes","AppRoutes","BASE_SOCKET_URL","SocketRoutes","OrderStatus","done","pending","created","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","path","expires","d","Date","setTime","getTime","Number","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","deleteCookie","setSession","data","accessToken","split","refreshToken","formatDate","date","Array","from","day","api","options","baseUrl","this","fetch","ingredients","method","headers","Authorization","body","JSON","stringify","email","password","user","token","fetchIngredients","createAsyncThunk","_","a","rejectWithValue","response","ok","Error","statusText","json","burgerIngredients","map","message","ingredientsSlice","createSlice","initialState","isLoading","error","reducers","clearQuantities","state","forEach","item","count","increaseQuantity","action","find","_id","payload","decreaseQuantity","addBunQuantity","type","extraReducers","builder","addCase","fulfilled","rejected","actions","Logo","className","classes","cn","styles","logo","to","exact","activeClassName","active","MainNav","nav","linkClasses","nav_link","burger","text","list_icon","UserNav","profile","isAuthenticated","profile_icon","AppHeader","headerClasses","header","wrapper","ErrorAlert","useState","isVisible","setVisible","useEffect","timer","setTimeout","clearTimeout","alert","IngredientPreview","picture","image","src","alt","Price","price","FeedOrderDetails","id","useParams","allIngredients","useLocation","orders","currentOrders","index","findIndex","order","number","createdAt","status","currentIngredients","push","ingredientsMap","Map","has","get","set","numberClasses","titleClasses","title","statusClasses","ingredientsClasses","nameClasses","quantityClasses","quantity","list","keys","items","length","preview","bottom","ModalOverlay","children","onClose","classNames","overlay","onClick","evt","target","currentTarget","modalRoot","getElementById","FOCUSABLE_ELEMENTS","Modal","onEscKeyDown","React","useCallback","code","modal","querySelector","firstFocusableElement","querySelectorAll","focusableContent","lastFocusableElement","focus","onTabPressed","key","keyCode","shiftKey","activeElement","preventDefault","includes","style","overflow","addEventListener","removeEventListener","ReactDOM","createPortal","close","FeedOrderModal","IngredientDetails","wrapperClasses","modal_wrapper","calories","proteins","fat","carbohydrates","modal_img_wrapper","table","IngredientModal","FeedOrderPage","wsInitActions","wsConnectionInit","createAction","wsConnectionClose","ordersFeedSlice","total","totalToday","wsConnected","wsConnectionSuccess","wsConnectionError","wsConnectionClosed","wsGetMessage","success","ordersFeedActions","onOpen","onMessage","onError","userFeedSlice","reverse","wsActions","getAllFeedOrders","getUserFeedOrders","wsInit","OrderCard","readyClass","ready","cardClasses","timeClasses","extraClasses","extra","totalPrice","reduce","info","slice","images_wrapper","zIndex","toString","OrdersFeed","location","feed","pathname","background","card","OrdersStatus","listClasses","countClasses","ordersByStatus","orders_wrapper","ready_item","in_progress_item","Spinner","spinner","FeedPage","dispatch","resetPassword","updatePassword","passwordSlice","passwordIsChanged","isEmailConfirmed","Form","legend","buttonText","onFormSubmit","formClasses","form","legendClasses","onSubmit","size","ForgotPasswordForm","emailValue","setEmailValue","onChange","PasswordPageWrapper","login","ForgotPasswordPage","IngredientPage","details","burgerConstructorSlice","addIngredient","constructorId","removeConstructorIngredient","splice","addBun","removeBun","clearOrder","swapIngredients","postOrder","orderSlice","clearOrderDetails","ConstructorItem","ref","useRef","useDrag","drag","useDrop","accept","hover","current","dragIndex","hoverIndex","drop","element","thumbnail","handleClose","onIngredientRemove","OrderDetails","idClasses","notificationClasses","notification","noteClasses","note","button","BurgerConstructor","history","useHistory","isModalVisible","setModalIsVisible","handleModalClose","handleModalOpen","bunClasses","list_item","priceClasses","instructionClasses","instruction","burgerConstructor","buttonStyle","opacity","pointerEvents","onDrop","collect","monitor","isHover","isOver","dropTarget","hoverStyles","border","section","isLocked","price_wrapper","orderIngredients","then","activeTab","tabSlice","setActiveTab","setDefault","Counter","MenuItem","article","dragRef","counter","image_wrapper","memo","MenuSublist","forwardRef","titleRef","generatePath","MenuList","itemsByType","useMemo","results","currentItems","mapItemsByType","containerRef","bunsRef","saucesRef","mainRef","sublistRefs","menu","onScroll","containerToTop","getBoundingClientRect","top","TabBar","tabClasses","tab","onTabClick","Object","values","BurgerIngredients","MainWrapper","DndProvider","backend","HTML5Backend","MainPage","registerUser","authToken","indexOf","logout","updateProfile","updateUserInfo","tokenResponse","tokenData","getUserData","getUserInfo","userSlice","ProfileNav","link","ProfileFeedPage","userFeed","wsError","ProfileForm","cancelClasses","cancel","passwordValue","setPasswordValue","nameValue","setNameValue","placeholder","icon","errorText","ProfilePage","RegistrationForm","RegistrationPage","SignInLink","ResetPasswordForm","setPassword","setToken","ResetPasswordPage","SignInForm","setEmail","SignInPage","RegisterLink","register","ResetPasswordLink","ProtectedRoute","rest","render","App","onModalClose","goBack","wsService","WebSocket","socketMiddleware","store","socket","socketName","next","onopen","event","onmessage","parse","onerror","onclose","ingredientSlice","setIngredient","removeIngredient","rootReducer","combineReducers","ingredientsReducer","burgerConstructorReducer","orderReducer","ingredientReducer","tabReducer","passwordReducer","userReducer","feedReducer","userFeedReducer","configureStore","reducer","middleware","getDefaultMiddleware","concat","browserHistory","createBrowserHistory","StrictMode"],"mappings":"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","file":"static/js/main.db739a4f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"error-alert_alert__2Jb92\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"price_price__1PqiV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed-order-page_main__1Eb2Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__21x4r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"menu-list_menu__3ZNuk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"tab-bar_wrapper__3vw2n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"main-page_wrapper__ML-ia\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"registration-form_form__10fOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"sign-in-form_form__2PtuC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"feed-order-details_wrapper__2wkEM\",\"number\":\"feed-order-details_number__2x956\",\"title\":\"feed-order-details_title__27SY0\",\"status\":\"feed-order-details_status__1X28e\",\"ingredients\":\"feed-order-details_ingredients__2hdwC\",\"list\":\"feed-order-details_list__2JEBn\",\"item\":\"feed-order-details_item__ZgZP8\",\"preview\":\"feed-order-details_preview__1bAPz\",\"name\":\"feed-order-details_name__34eZa\",\"price\":\"feed-order-details_price__2bpHe\",\"bottom\":\"feed-order-details_bottom__3WzQu\"};","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from '../store';\n\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import {TMenuItem, TServerMenuItem} from '../types';\n\n\nexport const adaptIngredientToClient = (ingredient: TServerMenuItem): TMenuItem => {\n  const adaptedIngredient = {\n    ...ingredient,\n    imageLarge: ingredient['image_large'],\n    imageMobile: ingredient['image_mobile'],\n  };\n\n  delete adaptedIngredient['image_large'];\n  delete adaptedIngredient['image_mobile'];\n\n  return adaptedIngredient;\n};\n","export const TABS = {\n  bun: '',\n  main: '',\n  sauce: '',\n};\n\nexport const BASE_URL = 'https://norma.nomoreparties.space/api';\n\nexport const ApiRoutes = {\n  INGREDIENTS: '/ingredients',\n  ORDERS: '/orders',\n  PASSWORD_RESET: '/password-reset',\n  REGISTER: '/register',\n  AUTH: '/auth',\n  RESET: '/reset',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n  TOKEN: '/token',\n  USER: '/user',\n};\n\nexport const AppRoutes = {\n  ROOT: '/',\n  LOGIN: '/login',\n  REGISTER: '/register',\n  FORGOT_PASSWORD: '/forgot-password',\n  RESET_PASSWORD: '/reset-password',\n  PROFILE: '/profile',\n  INGREDIENTS: '/ingredients/:id',\n  LOGOUT: '/logout',\n  NOT_FOUND: '/not-found',\n  FEED: '/feed',\n  FEED_ORDER: '/feed/:id',\n  ORDERS: '/profile/orders',\n  ORDERS_ORDER: '/profile/orders/:id',\n};\n\nexport const BASE_SOCKET_URL = 'wss://norma.nomoreparties.space/orders';\n\nexport const SocketRoutes = {\n  ALL: '/all',\n};\n\nexport const OrderStatus = {\n  done: '',\n  pending: '',\n  created: '',\n};\n","import {TMenuItem} from '../types';\n\ntype TSetCookieProps = {\n  expires?: number | string;\n  path?: string;\n} & { [extraParams: string]: string | number | boolean;}\n\nexport const mapItemsByType = (items: Array<TMenuItem>) => {\n  const results = new Map();\n  items.forEach((item) => {\n    const type = item.type;\n    if (results.has(type)) {\n      const currentItems = results.get(type);\n      currentItems.push(item);\n      results.set(type, currentItems);\n    } else {\n      const currentItems = [item]\n      results.set(type, currentItems);\n    }\n  });\n  return results;\n};\n\nexport const getCookie = (name: string) => {\n  const matches = document.cookie.match(\n    new RegExp(`(?:^|; )${name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, '\\\\$1')}=([^;]*)`),\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n};\n\nexport const setCookie = (name: string, value: string | number | boolean, props?: TSetCookieProps) => {\n  props = {\n    path: '/',\n    ...props,\n  };\n  let exp = props.expires;\n  const d = new Date();\n\n  if (typeof exp === 'number' && exp) {\n    d.setTime(d.getTime() + exp * 1000);\n    exp = Number(d);\n    props.expires = exp;\n  }\n  if (exp && d.toUTCString) {\n    props.expires = d.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = `${name}=${value}`;\n  for (const propName in props) {\n    updatedCookie += `; ${propName}`;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += `=${propValue}`;\n    }\n  }\n  document.cookie = updatedCookie;\n};\n\nexport const deleteCookie = (name: string) => {\n  setCookie(name, false, { expires: -1 });\n};\n\nexport const setSession = (data: any) => {\n  const accessToken = data.accessToken.split('Bearer ')[1];\n  const refreshToken = data.refreshToken;\n  if (accessToken) {\n    setCookie('accessToken', accessToken, {expires: 1200});\n  }\n  if (refreshToken) {\n    setCookie('refreshToken', refreshToken);\n  }\n};\n\nexport const formatDate = (date: string) => {\n  const [day, time] = Array.from(date.split('.'))[0].split('T');\n  return time + ' ' + day;\n};\n","import {ApiRoutes, BASE_URL} from '../utils/constants';\nimport { getCookie } from '../utils/common';\n\nclass Api {\n\n  baseUrl: string;\n\n  constructor(options: { baseUrl: string }) {\n    this.baseUrl = options.baseUrl;\n  }\n\n\n  fetchIngredients() {\n    return fetch(`${this.baseUrl}${ApiRoutes.INGREDIENTS}`);\n  }\n\n  postOrder(ingredients: any) {\n    return fetch(`${this.baseUrl}${ApiRoutes.ORDERS}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('accessToken')\n      },\n      body: JSON.stringify({\n        ingredients: ingredients,\n      }),\n    });\n  }\n\n  login(email: string, password: string) {\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.LOGIN}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    });\n  }\n\n  registerUser(user: any) {\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.REGISTER}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(user),\n    });\n  }\n\n  refreshToken() {\n    const refresh = getCookie('refreshToken');\n    const value = {token: refresh};\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.TOKEN}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(value)\n    });\n  }\n\n  logout() {\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.LOGOUT}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        token: getCookie('refreshToken'),\n      }),\n    });\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.USER}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('accessToken')\n      },\n    });\n  }\n\n  updateUserInfo(name:string, email:string, password:string) {\n    return fetch(`${this.baseUrl}${ApiRoutes.AUTH}${ApiRoutes.USER}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('accessToken')\n      },\n      body: JSON.stringify({\n        name, email, password,\n      }),\n    });\n  }\n\n  resetPassword(email: string) {\n    return fetch(`${this.baseUrl}${ApiRoutes.PASSWORD_RESET}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email,\n      }),\n    });\n  }\n\n  updatePassword(password: string, token: string) {\n    return fetch(`${this.baseUrl}${ApiRoutes.PASSWORD_RESET}${ApiRoutes.RESET}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        password,\n        token,\n      }),\n    });\n  }\n}\n\nconst api = new Api({\n  baseUrl: BASE_URL,\n});\n\nexport default api;\n","import {createSlice, createAsyncThunk, SerializedError, PayloadAction} from '@reduxjs/toolkit';\nimport {adaptIngredientToClient} from '../../adapter/adapter';\nimport api from '../../services/api';\nimport {TMenuItem} from '../../types';\n\n\ninterface IIngredientsState {\n  ingredients: TMenuItem[];\n  isLoading: boolean;\n  error: SerializedError | null;\n}\n\nconst initialState: IIngredientsState = {\n  ingredients: [],\n  isLoading: true,\n  error: null,\n};\n\nexport const fetchIngredients = createAsyncThunk(\n  'ingredients/fetchIngredients',\n  async (_, {rejectWithValue}) => {\n    try {\n      const response = await api.fetchIngredients();\n\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      const { data } = await response.json();\n      const burgerIngredients = data.map(adaptIngredientToClient);\n      return burgerIngredients;\n    } catch (error: any) {\n        return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst ingredientsSlice = createSlice({\n  name: 'ingredients',\n  initialState,\n  reducers: {\n    clearQuantities: (state) => {\n      state.ingredients.forEach((item) => delete item.count);\n    },\n    increaseQuantity: (state, action: PayloadAction<TMenuItem>) => {\n      const item = state.ingredients.find((item) => item._id === action.payload._id);\n      if (item && item.count) {\n        item.count++;\n      } else if (item) {\n        item.count = 1;\n      }\n    },\n    decreaseQuantity: (state, action: PayloadAction<TMenuItem>) => {\n      const item = state.ingredients.find((item) => item._id === action.payload._id);\n      if (item && item.count) {\n        if (item.count > 1) {\n          item.count--;\n        } else {\n          delete item['count'];\n        }\n      }\n    },\n    addBunQuantity: (state, action) => {\n      state.ingredients.forEach((item) => {\n        if (item.type === 'bun') {\n          if (action.payload._id === item._id) {\n            item.count = 2;\n          } else {\n            delete item['count'];\n          }\n        }\n      })\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchIngredients.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchIngredients.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.ingredients = action.payload;\n      })\n      .addCase(fetchIngredients.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n  },\n});\n\n\nexport const {\n  increaseQuantity,\n  addBunQuantity,\n  decreaseQuantity,\n  clearQuantities\n} = ingredientsSlice.actions;\n\nexport default ingredientsSlice.reducer;\n","import React from 'react';\nimport cn from 'classnames';\nimport {Logo as LogoIcon} from '@ya.praktikum/react-developer-burger-ui-components';\nimport {NavLink} from 'react-router-dom';\nimport {AppRoutes} from '../../utils/constants';\n\nimport styles from './logo.module.css';\n\n\ntype TLogoProps = {\n  className?: string;\n};\n\n\nfunction Logo({ className }: TLogoProps): JSX.Element {\n\n  const classes = cn(styles.logo, className);\n\n  return (\n    <NavLink to={AppRoutes.ROOT} exact={true} className={classes} activeClassName={styles.active}>\n      <LogoIcon />\n    </NavLink>\n  )\n}\n\n\nexport default Logo;\n","import React from 'react';\nimport cn from'classnames';\nimport {BurgerIcon, ListIcon} from '@ya.praktikum/react-developer-burger-ui-components';\nimport {NavLink} from 'react-router-dom';\nimport {AppRoutes} from '../../utils/constants';\n\nimport styles from '../main-nav/main-nav.module.css';\n\n\ninterface IMainNavProps {\n  className?: string;\n};\n\n\nfunction MainNav({ className }: IMainNavProps): JSX.Element {\n\n  const classes = cn(styles.nav, className);\n  const linkClasses = cn(styles.nav_link, 'text text_type_main-default text_color_inactive');\n\n  return (\n    <nav className={classes}>\n      <NavLink to={AppRoutes.ROOT} exact={true} className={linkClasses} activeClassName={styles.active}>\n        <div className={styles.burger}>\n          <BurgerIcon type=\"secondary\" />\n        </div>\n        <p className={styles.text}>\n          \n        </p>\n      </NavLink>\n      <NavLink to={AppRoutes.FEED} className={linkClasses} activeClassName={styles.active}>\n        <div className={styles.list_icon}>\n          <ListIcon type=\"secondary\" />\n        </div>\n        <p className={styles.text}>\n           \n        </p>\n      </NavLink>\n    </nav>\n  );\n}\n\n\nexport default MainNav;\n","import {ProfileIcon} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport cn from 'classnames';\nimport {NavLink} from 'react-router-dom';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {AppRoutes} from '../../utils/constants';\n\nimport styles from './user-nav.module.css';\n\n\ntype TUserNavProps = {\n  className?: string;\n};\n\n\nfunction UserNav({ className }: TUserNavProps): JSX.Element {\n\n  const classes = cn(styles.profile, className, 'text text_type_main-default text_color_inactive');\n\n  const {isAuthenticated} = useAppSelector((state) => state.user);\n\n  return (\n    <NavLink\n      to={isAuthenticated ? AppRoutes.PROFILE : AppRoutes.LOGIN}\n      className={classes}\n      activeClassName={styles.active}\n    >\n      <div className={styles.profile_icon}>\n        <ProfileIcon type=\"secondary\" />\n      </div>\n      <p className={styles.text}>\n        {isAuthenticated ? ' ' : ''}\n      </p>\n    </NavLink>\n  );\n}\n\n\nexport default UserNav;\n","import React from 'react';\nimport cn from 'classnames';\nimport Logo from '../logo/logo';\nimport MainNav from '../main-nav/main-nav';\nimport UserNav from '../user-nav/user-nav';\n\nimport styles from './app-header.module.css';\n\n\ntype TAppHeaderProps = {\n  className?: string;\n};\n\n\nfunction AppHeader({ className }: TAppHeaderProps): JSX.Element {\n\n  const headerClasses = cn(styles.header, className);\n\n  return (\n    <header className={headerClasses}>\n      <div className={styles.wrapper}>\n        <MainNav className={styles.nav}/>\n        <Logo className={styles.logo}/>\n        <UserNav className={styles.profile}/>\n      </div>\n    </header>\n  )\n}\n\n\nexport default AppHeader;\n","import React, { useEffect, useState } from 'react';\n\nimport styles from './error-alert.module.css';\n\n\ntype TErrorAlertProps = {\n  message?: string;\n};\n\n\nconst DEFAULT_ALERT_MESSAGE = 'Something went wrong:(';\nconst ALERT_TIMEOUT = 7000;\n\nfunction ErrorAlert({message = DEFAULT_ALERT_MESSAGE}: TErrorAlertProps): JSX.Element {\n\n  const [isVisible, setVisible] = useState<boolean>(true);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setVisible(false);\n    }, ALERT_TIMEOUT);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, []);\n\n  return (\n    <div>\n      {isVisible && (\n        <div className={styles.alert}>\n          <p>{message}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\nexport default ErrorAlert;\n","import React from 'react';\nimport cn from 'classnames';\nimport {TMenuItem} from '../../types';\n\nimport styles from './ingredient-preview.module.css';\n\n\ntype TIngredientPreviewProps = {\n  className?: string;\n  item: TMenuItem;\n}\n\nfunction IngredientPreview({ className, item }: TIngredientPreviewProps): JSX.Element {\n\n  return (\n    <div className={cn(styles.picture, className)}>\n      <img\n        className={styles.image}\n        src={item.imageMobile}\n        alt={item.name}\n      />\n    </div>\n  )\n}\n\n\nexport default IngredientPreview;\n","import React from 'react';\nimport {CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components';\nimport cn from 'classnames';\n\nimport styles from './price.module.css';\n\n\ntype TPriceProps = {\n  className?: string;\n  price: number;\n};\n\n\nfunction Price({ className, price }: TPriceProps): JSX.Element {\n\n  const classes = cn(styles.price, 'text text_type_digits-default', className);\n\n  return (\n    <p className={classes}>{price}&nbsp;<CurrencyIcon type=\"primary\" /></p>\n  );\n}\n\n\nexport default Price;\n","import cn from 'classnames';\nimport React from 'react';\nimport {useLocation, useParams} from 'react-router';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {TLocationState, TMenuItem} from '../../types';\nimport {formatDate} from '../../utils/common';\nimport {OrderStatus} from '../../utils/constants';\nimport IngredientPreview from '../ingredient-preview/ingredient-preview';\nimport Price from '../price/price';\n\nimport styles from './feed-order-details.module.css';\n\n\ntype TParams = {\n  id: string;\n};\n\nfunction FeedOrderDetails() {\n\n\n  const { id } = useParams<TParams>();\n  const allIngredients: TMenuItem[] = useAppSelector(\n    (state) => state.ingredients.ingredients);\n  const location = useLocation<TLocationState>();\n  const {state} = location;\n\n  if (!state) {\n    return (<p className={'text text_type_main-medium'}>  </p>)\n  }\n\n  const {currentOrders: orders} = state;\n\n  if (!orders) {\n    return (<p className={'text text_type_main-medium'}>  </p>)\n  }\n\n  const index = orders.findIndex((item) => item._id === id);\n\n  if (index < 0) {\n    return (<p className={'text text_type_main-medium'}>  </p>)\n  }\n\n  const order = orders[index];\n\n  const { ingredients, name, number, createdAt, status } = order;\n\n\n  const currentIngredients: TMenuItem[] = [];\n  allIngredients.forEach((item) => {\n    ingredients.forEach((ingredient) => {\n      if (ingredient === item._id) {\n        currentIngredients.push(item);\n      }\n    });\n  });\n\n  const ingredientsMap = new Map();\n\n  currentIngredients.forEach((item) => {\n    if (ingredientsMap.has(item._id)) {\n      ingredientsMap.get(item._id).push(item);;\n    } else {\n      ingredientsMap.set(item._id, [item]);\n    }\n  });\n\n  const numberClasses = cn(styles.number, 'text text_type_digits-default');\n  const titleClasses = cn(styles.title, 'text text_type_main-medium');\n  const statusClasses = cn(styles.status, 'text text_type_main-default');\n  const ingredientsClasses = cn(styles.ingredients, 'text text_type_main-medium');\n  const nameClasses = cn(styles.name, 'text text_type_main-default');\n  const quantityClasses = cn(styles.quantity, 'text text_type_digits-default');\n\n\n  return (\n    order &&\n    <div className={styles.wrapper}>\n      <p className={numberClasses}>#{number}</p>\n      <h3 className={titleClasses}>{name}</h3>\n      <p className={statusClasses}>{OrderStatus[status]}</p>\n      <p className={ingredientsClasses}>:</p>\n      <ul className={styles.list}>\n        {\n          Array.from(ingredientsMap.keys()).map((id) => {\n            const items = ingredientsMap.get(id);\n            const count = items.length;\n            const item = items[0];\n            return (\n              <li className={styles.item} key={id}>\n                <IngredientPreview item={item} className={styles.preview} />\n                <p className={nameClasses}>{item.name}</p>\n                <div className={styles.price}>\n                  <span className={quantityClasses}>{count}&nbsp;x&nbsp;</span>\n                  <Price price={item.price}/>\n                </div>\n              </li>\n            )\n          })\n        }\n      </ul>\n      <div className={styles.bottom}>\n        <p className={'text text_type_main-default text_color_inactive'}>\n          {formatDate(createdAt)}\n        </p>\n        <Price price={5000} />\n      </div>\n    </div>\n  )\n}\n\n\nexport default FeedOrderDetails;\n","import React, {ReactNode} from 'react';\nimport cn from 'classnames';\n\nimport styles from './modal-overlay.module.css';\n\n\ntype TModalOverlayProps = {\n  children: ReactNode;\n  className?: string;\n  onClose: () => void;\n};\n\nfunction ModalOverlay({ children, className, onClose }: TModalOverlayProps): JSX.Element {\n\n  const classNames = cn(styles.overlay, className);\n\n  const handleClick = (evt: React.SyntheticEvent) => {\n    if (evt.target === evt.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={classNames} onClick={handleClick}>\n      {children}\n    </div>\n  )\n}\n\n\nexport default ModalOverlay;\n","import React, {ReactNode, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport ModalOverlay from '../modal-overlay/modal-overlay';\n\nimport styles from './modal.module.css';\n\ntype TModalType = {\n  title?: string;\n  children: ReactNode;\n  onClose: () => void\n};\n\n\nconst modalRoot = document.getElementById('modal-root')!;\nconst FOCUSABLE_ELEMENTS = 'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n\nconst Modal = ({ title, children, onClose }: TModalType): JSX.Element => {\n\n  const onEscKeyDown = React.useCallback(( { code } ) => {\n    if ( code === 'Escape' ) {\n      onClose();\n    }\n  }, [onClose]);\n\n  useEffect(() => {\n    const modal = document.querySelector<HTMLElement>('#modal');\n\n    const firstFocusableElement = modal?.querySelectorAll(FOCUSABLE_ELEMENTS)[0];\n    const focusableContent = modal?.querySelectorAll(FOCUSABLE_ELEMENTS) as ArrayLike<Element> ;\n    const lastFocusableElement = focusableContent && focusableContent[focusableContent.length - 1];\n\n    (firstFocusableElement as HTMLElement).focus();\n\n\n    const onTabPressed = (evt: KeyboardEvent) => {\n      const isTabPressed = evt.key === 'Tab' || evt.keyCode === 9;\n      if (!isTabPressed) {\n        return;\n      }\n      if (evt.shiftKey) {\n        if (document.activeElement === firstFocusableElement) {\n          (lastFocusableElement as HTMLElement).focus();\n          evt.preventDefault();\n        }\n      } else {\n        if (!Array.from(focusableContent).includes(document.activeElement as Element)) {\n          (firstFocusableElement as HTMLElement).focus();\n        }\n        if (document.activeElement === lastFocusableElement) {\n          (firstFocusableElement as HTMLElement).focus();\n          evt.preventDefault();\n        }\n      }\n    };\n\n    document.body.style.overflow = 'hidden';\n    document.addEventListener('keydown', onTabPressed);\n    document.addEventListener('keydown', onEscKeyDown);\n\n    return () => {\n      document.body.style.overflow = 'unset';\n      document.removeEventListener('keydown', onTabPressed);\n      document.removeEventListener('keydown', onEscKeyDown);\n    }\n  }, [onEscKeyDown]);\n\n  return ReactDOM.createPortal(\n    <ModalOverlay onClose={onClose}>\n      <div className={styles.modal} id=\"modal\">\n        <button className={styles.close} aria-label=\"  \" onClick={onClose}>\n          <CloseIcon type=\"primary\" />\n        </button>\n        <div className={styles.header}>\n          <h2 className=\"text text_type_main-large\">{title}</h2>\n        </div>\n        {children}\n      </div>\n    </ModalOverlay>,\n    modalRoot\n  );\n};\n\n\nexport default Modal;\n","import React from 'react';\nimport FeedOrderDetails from '../feed-order-details/feed-order-details';\nimport Modal from '../modal/modal';\n\n\ntype TFeedOrderModalProps = {\n  onClose: () => void;\n};\n\nfunction FeedOrderModal({ onClose }: TFeedOrderModalProps) {\n\n  return (\n    <Modal onClose={onClose}>\n      <FeedOrderDetails />\n    </Modal>\n  )\n}\n\n\nexport default FeedOrderModal;\n","import React from 'react';\nimport cn from 'classnames';\nimport {useParams} from 'react-router';\nimport {useAppSelector} from '../../hooks/hooks';\n\nimport styles from './ingredients-details.module.css';\n\n\ntype TIngredientDetailsProps = {\n  className?: string;\n};\n\ntype TParams = {\n  id: string | undefined;\n};\n\n\nfunction IngredientDetails({ className }: TIngredientDetailsProps): JSX.Element {\n\n  const wrapperClasses = cn(styles.modal_wrapper, className);\n\n  const { id } = useParams<TParams>();\n  const item = useAppSelector(\n    (state) => state.ingredients.ingredients).find(\n      ({ _id } : {_id: string}) => id === _id);\n\n  const titleClasses = cn('text text_type_main-medium', styles.title);\n\n  if (!item) {\n    return (\n      <p className={titleClasses}>  :(</p>\n    )\n  }\n\n  const {\n    imageLarge,\n    name,\n    calories,\n    proteins,\n    fat,\n    carbohydrates\n  } = item;\n\n  return (\n    <>\n      <div className={wrapperClasses}>\n        <div className={styles.modal_img_wrapper}>\n          <img src={imageLarge} alt={name}/>\n        </div>\n        <h3 className={titleClasses}>{name}</h3>\n        <table className={styles.table}>\n          <caption className='visually-hidden'> </caption>\n          <thead>\n          <tr>\n            <th className=\"text text_type_main-default text_color_inactive\">,</th>\n            <th className=\"text text_type_main-default text_color_inactive\">, </th>\n            <th className=\"text text_type_main-default text_color_inactive\">, </th>\n            <th className=\"text text_type_main-default text_color_inactive\">, </th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr>\n            <td className=\"text text_type_digits-default text_color_inactive\">{calories}</td>\n            <td className=\"text text_type_digits-default text_color_inactive\">{proteins}</td>\n            <td className=\"text text_type_digits-default text_color_inactive\">{fat}</td>\n            <td className=\"text text_type_digits-default text_color_inactive\">{carbohydrates}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </>\n  )\n}\n\n\nexport default IngredientDetails;\n","import React from 'react';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport Modal from '../modal/modal';\n\n\ntype TIngredientModalProps = {\n  onClose: () => void;\n};\n\nfunction IngredientModal({ onClose }: TIngredientModalProps): JSX.Element {\n\n  return (\n    <Modal title=' ' onClose={onClose}>\n      <IngredientDetails />\n    </Modal>\n  )\n}\n\n\nexport default IngredientModal;\n","import React from 'react';\nimport FeedOrderDetails from '../../components/feed-order-details/feed-order-details';\n\nimport styles from './feed-order-page.module.css';\n\n\nfunction FeedOrderPage() {\n\n  return (\n    <main className={styles.main}>\n      <FeedOrderDetails />\n    </main>\n  )\n}\n\nexport default FeedOrderPage;\n","import { createAction, PayloadActionCreator } from '@reduxjs/toolkit';\n\ninterface IWsInitActions {\n  wsConnectionInit: PayloadActionCreator<string>;\n  wsConnectionClose: PayloadActionCreator;\n}\n\nconst wsInitActions: IWsInitActions = {\n  wsConnectionInit: createAction('WS_CONNECTION_INIT'),\n  wsConnectionClose: createAction('WS_CONNECTION_CLOSE'),\n};\n\n\nexport default wsInitActions;\n","import { createSlice } from '@reduxjs/toolkit';\nimport {TFeedOrder} from '../../types';\n\ninterface IOrdersFeedState {\n  orders: TFeedOrder[];\n  total: number;\n  totalToday: number;\n  wsConnected: boolean;\n  error: boolean;\n}\n\nconst initialState: IOrdersFeedState = {\n  orders: [],\n  total: 0,\n  totalToday: 0,\n  wsConnected: false,\n  error: false,\n};\n\nconst ordersFeedSlice = createSlice({\n  name: 'ordersFeed',\n  initialState,\n  reducers: {\n    wsConnectionSuccess: (state) => {\n      state.wsConnected = true;\n      state.error = false;\n    },\n    wsConnectionError: (state) => {\n      state.wsConnected = false;\n      state.error = true ;\n    },\n    wsConnectionClosed: (state) => {\n      state.wsConnected = false;\n      state.error = false;\n    },\n    wsGetMessage: (state, action) => {\n      const { orders, total, totalToday, success } = action.payload;\n      if (!success) {\n        state.error = true;\n        return;\n      }\n      state.orders = orders;\n      state.total = total;\n      state.totalToday = totalToday;\n      state.error = false;\n    }\n  },\n});\n\n\nexport const {\n  wsConnectionSuccess,\n  wsConnectionError,\n  wsConnectionClosed,\n  wsGetMessage\n} = ordersFeedSlice.actions;\nexport default ordersFeedSlice.reducer;\n","import {\n  wsConnectionSuccess,\n  wsConnectionError,\n  wsConnectionClosed,\n  wsGetMessage\n} from '../slices/ws-orders-feed-slice';\n\n\nconst ordersFeedActions = {\n  onOpen: wsConnectionSuccess,\n  onMessage: wsGetMessage,\n  onError: wsConnectionError,\n  onClose: wsConnectionClosed,\n};\n\n\nexport default ordersFeedActions;\n","import {createSlice} from '@reduxjs/toolkit';\nimport {TFeedOrder} from '../../types';\n\ninterface IUserFeedState {\n  orders: TFeedOrder[];\n  wsConnected: boolean;\n  error: boolean;\n}\n\nconst initialState: IUserFeedState = {\n  orders: [],\n  wsConnected: false,\n  error: false,\n};\n\nconst userFeedSlice = createSlice({\n  name: 'userFeed',\n  initialState,\n  reducers: {\n    wsConnectionSuccess: (state) => {\n      state.wsConnected = true;\n      state.error = false;\n    },\n    wsConnectionError: (state) => {\n      state.wsConnected = false;\n      state.error = true;\n    },\n    wsConnectionClosed: (state) => {\n      state.wsConnected = false;\n      state.error = false;\n    },\n    wsGetMessage: (state, action) => {\n      const { orders, success } = action.payload;\n      if (!success) {\n        state.error = true;\n        return;\n      }\n      state.orders = orders.reverse();\n      state.error = false;\n    }\n  },\n});\n\nexport default userFeedSlice.reducer;\nexport const {\n  wsConnectionSuccess,\n  wsConnectionError,\n  wsConnectionClosed,\n  wsGetMessage\n} = userFeedSlice.actions;\n","import wsInitActions from './ws-init-actions';\nimport ordersFeedActions from './ws-orders-feed-actions';\nimport userFeedActions from './ws-user-feed-actions';\n\n\ntype TWsActions = {\n  getAllFeedOrders: typeof ordersFeedActions ;\n  getUserFeedOrders: typeof userFeedActions;\n  wsInit: typeof wsInitActions;\n  [k: string]: any;\n};\n\nconst wsActions: TWsActions = {\n  getAllFeedOrders: ordersFeedActions ,\n  getUserFeedOrders: userFeedActions,\n  wsInit: wsInitActions,\n};\n\n\nexport default wsActions;\n","import {\n  wsConnectionSuccess,\n  wsConnectionError,\n  wsConnectionClosed,\n  wsGetMessage\n} from '../slices/ws-user-feed-slice';\n\n\nconst userFeedActions = {\n  onOpen: wsConnectionSuccess,\n  onMessage: wsGetMessage,\n  onError: wsConnectionError,\n  onClose: wsConnectionClosed,\n};\n\n\nexport default userFeedActions;\n","import React from 'react';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {TFeedOrder, TMenuItem} from '../../types';\nimport {formatDate} from '../../utils/common';\nimport {OrderStatus} from '../../utils/constants';\nimport Price from '../price/price';\nimport cn from 'classnames';\n\nimport styles from './order-card.module.css';\n\n\nconst MAX_INGREDIENTS = 6;\nconst MAX_NAME_LENGTH = 60;\n\ntype TOrderCardProps = {\n  className?: string;\n  order: TFeedOrder;\n}\n\nfunction OrderCard({ className, order }: TOrderCardProps): JSX.Element {\n\n  const { ingredients, name, number, createdAt, status } = order;\n\n  const readyClass = status === 'done' ? styles.ready : '';\n\n  const cardClasses = cn(styles.wrapper, className);\n  const numberClasses = cn('text text_type_digits-default');\n  const timeClasses = cn('text text_type_main-default text_color_inactive');\n  const titleClasses = cn(styles.title, 'text text_type_main-medium');\n  const extraClasses = cn(styles.extra, 'text text_type_digits-default');\n  const statusClasses = cn(styles.status, readyClass, 'text text_type_main-small');\n\n\n  const allIngredients: TMenuItem[] = useAppSelector(\n    (state) => state.ingredients.ingredients);\n\n  const currentIngredients: TMenuItem[] = [];\n  allIngredients.forEach((item) => {\n    ingredients.forEach((ingredient) => {\n      if (ingredient === item._id) {\n        currentIngredients.push(item);\n      }\n    });\n  });\n\n  const totalPrice = currentIngredients.reduce((total: number, item: TMenuItem) => {\n    return total + item.price;\n  }, 0);\n\n  return (\n    <div className={cardClasses}>\n      <div className={styles.info}>\n        <span className={numberClasses}>#{number}</span>\n        <span className={timeClasses}>{formatDate(createdAt)}</span>\n      </div>\n      <h3 className={titleClasses}>{\n        name.length > MAX_NAME_LENGTH\n        ? `${name.slice(0, MAX_NAME_LENGTH)}...`\n        : name\n      }\n      </h3>\n      {status && <p className={statusClasses}>{OrderStatus[status]}</p>}\n      <div className={styles.bottom}>\n        <div className={styles.images_wrapper}>\n          {\n            currentIngredients.slice(0, MAX_INGREDIENTS).map((item, index) => {\n              return (\n                <div\n                  key={item._id + index.toString()}\n                  className={styles.picture}\n                  style={{zIndex: MAX_INGREDIENTS - index}}>\n                  <img className={styles.image} src={item.image} alt={item.name}/>\n                </div>)\n            })\n          }\n          {\n            ingredients.length > MAX_INGREDIENTS &&\n            <span className={extraClasses}>+{ingredients.length - MAX_INGREDIENTS}</span>\n          }\n        </div>\n        <Price price={totalPrice} />\n      </div>\n    </div>\n  )\n}\n\n\nexport default OrderCard;\n","import React from 'react';\nimport {Link, useLocation} from 'react-router-dom';\nimport {TFeedOrder} from '../../types';\nimport OrderCard from '../order-card/order-card';\n\nimport styles from './orders-feed.module.css';\n\n\ntype TOrdersFeedProps = {\n  orders: TFeedOrder[];\n}\n\nfunction OrdersFeed({ orders }: TOrdersFeedProps): JSX.Element {\n\n  const location = useLocation();\n\n  return (\n    <section className={styles.orders}>\n      <div className={styles.feed}>\n        {\n          orders.map((order) =>\n            <Link\n              to={{\n                pathname: `${location.pathname}/${order._id}`,\n                state: {background: location, currentOrders: orders}\n              }}\n              key={order._id}\n            >\n              <OrderCard className={styles.card} order={order} />\n            </Link>)\n        }\n      </div>\n    </section>\n  )\n}\n\n\nexport default OrdersFeed;\n","import React from 'react';\nimport cn from 'classnames';\nimport {useAppSelector} from '../../hooks/hooks';\nimport styles from './orders-status.module.css';\n\n\nfunction OrdersStatus(): JSX.Element {\n\n  const titleClasses = cn(styles.title, 'text text_type_main-medium');\n  const listClasses = cn(styles.list, 'text text_type_digits-default');\n  const countClasses = cn(styles.count, 'text text_type_digits-large');\n\n  const { orders, total, totalToday } = useAppSelector((state) => state.feed);\n\n  const ordersByStatus = new Map();\n  ordersByStatus.set('done', []);\n  ordersByStatus.set('in progress', []);\n  orders.forEach((order) => {\n    order.status === 'done'\n      ? ordersByStatus.get('done').push(order.number)\n      : ordersByStatus.get('in progress').push(order.number);\n  })\n\n  return (\n    <section className={styles.orders}>\n      <div className={styles.orders_wrapper}>\n        <div>\n          <h3 className={titleClasses}>:</h3>\n          <ul className={listClasses}>\n            {\n              ordersByStatus.get('done')\n                .map((number: number) =>\n                  <li\n                    key={number}\n                    className={styles.ready_item}>\n                    {number}\n                  </li>\n                )\n            }\n          </ul>\n        </div>\n        <div>\n          <h3 className={titleClasses}> :</h3>\n          <ul className={listClasses}>\n            {\n              ordersByStatus.get('in progress')\n                .map((number: number) =>\n                  <li\n                    key={number}\n                    className={styles.in_progress_item}>\n                    {number}\n                  </li>\n                )\n            }\n          </ul>\n        </div>\n      </div>\n      <div className={styles.wrapper}>\n        <h3 className={titleClasses}>   :</h3>\n        <p className={countClasses}>{total}</p>\n      </div>\n      <div>\n        <h3 className={titleClasses}>  :</h3>\n        <p className={countClasses}>{totalToday}</p>\n      </div>\n    </section>\n  )\n}\n\n\nexport default OrdersStatus;\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './spinner.module.css';\n\n\ntype TSpinnerProps = {\n  className?: string;\n};\n\n\nfunction Spinner({ className }: TSpinnerProps): JSX.Element {\n\n  const classes = cn(className, styles.spinner);\n\n  return (\n    <div className={classes}>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  )\n}\n\n\nexport default Spinner;\n","import cn from 'classnames';\nimport React, {useEffect} from 'react';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport wsActions from '../../store/action-types';\nimport ErrorAlert from '../../components/error-alert/error-alert';\nimport OrdersFeed from '../../components/orders-feed/orders-feed';\nimport OrdersStatus from '../../components/orders-status/orders-status';\nimport Spinner from '../../components/spinner/spinner';\nimport styles from './feed-page.module.css';\n\n\nfunction FeedPage(): JSX.Element {\n\n  const titleClasses = cn(styles.title, 'text text_type_main-large');\n\n  const dispatch = useAppDispatch();\n  const {orders, error, wsConnected} = useAppSelector((state) => state.feed);\n\n  useEffect(() => {\n    dispatch(wsActions.wsInit.wsConnectionInit('getAllFeedOrders'));\n\n    return () => {\n      dispatch(wsActions.wsInit.wsConnectionClose());\n    }\n  }, [dispatch]);\n\n  return (\n    <main className={styles.main}>\n      <h2 className={titleClasses}> </h2>\n      <div className={styles.wrapper}>\n        {error && <ErrorAlert />}\n        {!wsConnected && <Spinner className={styles.spinner}/>}\n        {!error && wsConnected &&\n        <>\n          <OrdersFeed orders={orders} />\n          <OrdersStatus />\n        </>\n        }\n      </div>\n    </main>\n  )\n}\n\n\nexport default FeedPage;\n","import {createSlice, createAsyncThunk, SerializedError} from '@reduxjs/toolkit';\nimport api from '../../services/api';\n\n\ninterface IPasswordState {\n  isLoading: boolean;\n  error: SerializedError | null;\n  success: boolean;\n  passwordIsChanged: boolean;\n  isEmailConfirmed: boolean;\n}\n\nconst initialState: IPasswordState = {\n  isLoading: false,\n  error: null,\n  success: false,\n  passwordIsChanged: false,\n  isEmailConfirmed: false,\n};\n\nexport const resetPassword = createAsyncThunk(\n  'password/resetPassword',\n  async function (email: string, {rejectWithValue, dispatch}) {\n    try {\n      const response = await api.resetPassword(email);\n\n      if (!response.ok) {\n        throw new Error('Server error, try again');\n      }\n\n      const data = await response.json();\n      return data;\n\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n\nexport const updatePassword = createAsyncThunk(\n  'password/updatePassword',\n  async function ({password, token}: {password: string, token: string}, {rejectWithValue, dispatch}) {\n    try {\n\n      const response = await api.updatePassword(password, token);\n\n      if (!response.ok) {\n        throw new Error('Server error, try again');\n      }\n\n      const data = await response.json();\n      return data;\n\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst passwordSlice = createSlice({\n  name: 'password',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(resetPassword.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n        state.isEmailConfirmed = false;\n      })\n      .addCase(resetPassword.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.success = true;\n        state.isEmailConfirmed = true;\n      })\n      .addCase(resetPassword.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n      .addCase(updatePassword.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.passwordIsChanged = false;\n      })\n      .addCase(updatePassword.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.passwordIsChanged = true;\n      })\n      .addCase(updatePassword.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n  },\n});\n\nexport default passwordSlice.reducer;\n","import {Button} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React, {ReactNode} from 'react';\nimport cn from 'classnames';\n\nimport styles from './form.module.css';\n\n\ntype TFormProps = {\n  legend: string;\n  buttonText: string;\n  onFormSubmit: (evt: React.SyntheticEvent) => void;\n  className?: string;\n  children: ReactNode;\n};\n\nfunction Form(\n  {\n    legend,\n    children,\n    buttonText,\n    onFormSubmit,\n    className,\n  }: TFormProps): JSX.Element {\n\n  const formClasses = cn(styles.form, className);\n  const legendClasses = cn('text text_type_main-medium', styles.legend);\n\n  return (\n    <form className={formClasses} onSubmit={onFormSubmit}>\n      <legend className={legendClasses}>{legend}</legend>\n      {children}\n      <Button size=\"medium\" type=\"primary\">{buttonText}</Button>\n    </form>\n  )\n}\n\n\nexport default Form;\n","import {EmailInput} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {resetPassword} from '../../store/slices/password-slice';\nimport ErrorAlert from '../../components/error-alert/error-alert';\nimport Form from '../../components/form/form';\n\n\nfunction ForgotPasswordForm(): JSX.Element {\n\n  const dispatch = useAppDispatch();\n\n  const { error } = useAppSelector((state) => state.password);\n\n  const [emailValue, setEmailValue] = React.useState<string>('');\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setEmailValue(evt.target.value);\n  };\n\n  const onSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(resetPassword(emailValue));\n  };\n\n  return (\n    <Form\n      legend={' '}\n      buttonText={''}\n      onFormSubmit={onSubmit}\n    >\n      {error && <ErrorAlert />}\n      <EmailInput\n        onChange={onEmailChange}\n        value={emailValue}\n        name=\"email\"\n        size=\"default\"\n      />\n    </Form>\n  )\n}\n\n\nexport default ForgotPasswordForm;\n","import cn from 'classnames';\nimport React, {ReactNode} from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoutes} from '../../utils/constants';\n\nimport styles from './password-page-wrapper.module.css';\n\n\ntype TPasswordPageWrapperProps = {\n  children: ReactNode;\n};\n\nfunction PasswordPageWrapper({ children }: TPasswordPageWrapperProps): JSX.Element {\n\n  return (\n    <div className={styles.wrapper}>\n      <main className={styles.main}>\n        {children}\n        <p className={cn('text text_type_main-default text_color_inactive', styles.password)}>\n           ?&ensp;\n          <Link to={AppRoutes.LOGIN} className={styles.login}>\n            \n          </Link>\n        </p>\n      </main>\n    </div>\n  )\n}\n\n\nexport default PasswordPageWrapper;\n","import React from 'react';\nimport {Redirect, useLocation} from 'react-router-dom';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {AppRoutes} from '../../utils/constants';\nimport ForgotPasswordForm from './forgot-password-form';\nimport PasswordPageWrapper from '../../components/password-page-wrapper/password-page-wrapper';\n\n\nfunction ForgotPasswordPage(): JSX.Element {\n\n  const isAuthenticated = useAppSelector((state) => state.user.isAuthenticated);\n\n  const isEmailConfirmed = useAppSelector((state) => state.password.isEmailConfirmed);\n  const location = useLocation();\n\n  return (\n    <>\n      {\n        isAuthenticated\n        && <Redirect to={AppRoutes.ROOT} />\n      }\n      {isEmailConfirmed\n        && <Redirect to={{\n          pathname: AppRoutes.RESET_PASSWORD,\n          state: {from: location.pathname}\n        }} />}\n      <PasswordPageWrapper >\n        <ForgotPasswordForm />\n      </PasswordPageWrapper>\n    </>\n  )\n}\n\n\nexport default ForgotPasswordPage;\n","import React from 'react';\nimport IngredientDetails from '../../components/ingredient-details/ingredient-details';\n\nimport styles from './ingredient-page.module.css';\n\n\nfunction IngredientPage(): JSX.Element {\n\n  return (\n    <div className={styles.wrapper}>\n      <IngredientDetails className={styles.details}/>\n    </div>\n  )\n}\n\n\nexport default IngredientPage;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport {TMenuItem} from '../../types';\n\n\ninterface IBurgerConstructorState {\n  ingredients: Array<TMenuItem>;\n  bun: TMenuItem | null;\n  totalPrice: number;\n}\n\nconst initialState: IBurgerConstructorState = {\n  ingredients: [],\n  bun: null,\n  totalPrice: 0,\n};\n\nconst burgerConstructorSlice = createSlice({\n  name: 'burgerConstructor',\n  initialState,\n  reducers: {\n    addIngredient: (state, action: PayloadAction<TMenuItem>) => {\n      const ingredient = {...action.payload, constructorId: state.ingredients.length};\n      state.ingredients.push(ingredient);\n      state.totalPrice = state.totalPrice + action.payload.price;\n    },\n    removeConstructorIngredient: (\n      state, action: PayloadAction<TMenuItem>) => {\n      state.totalPrice = state.totalPrice - action.payload.price;\n      const index = state.ingredients.findIndex(\n        (ingredient) => ingredient._id = action.payload._id\n      );\n      state.ingredients.splice(index, 1);\n    },\n    addBun: (state, action: PayloadAction<TMenuItem>) => {\n      if ((state.bun === null) || (state.bun && state.bun._id !== action.payload._id)) {\n        if (state.bun) {\n          state.totalPrice = state.totalPrice - 2 * state.bun.price;\n        }\n        state.bun = action.payload;\n        state.totalPrice = state.totalPrice + 2 * action.payload.price;\n      }\n    },\n    removeBun: (state) => {\n      if (state.bun) {\n        state.totalPrice = state.totalPrice - 2 * state.bun.price;\n      }\n      state.bun = null;\n    },\n    clearOrder: (state) => {\n      state.ingredients = [];\n      state.bun = null;\n      state.totalPrice = 0;\n    },\n    swapIngredients: (\n      state, action: PayloadAction<{from: number, to: number}>) => {\n      const from = action.payload.from;\n      const to = action.payload.to;\n      [state.ingredients[from], state.ingredients[to]] = [state.ingredients[to], state.ingredients[from]];\n    }\n  },\n})\n\nexport const {\n  addIngredient,\n  removeConstructorIngredient,\n  addBun,\n  removeBun,\n  clearOrder,\n  swapIngredients\n} = burgerConstructorSlice.actions;\nexport default burgerConstructorSlice.reducer;\n","import {createSlice, createAsyncThunk, SerializedError} from '@reduxjs/toolkit';\nimport api from '../../services/api';\nimport {TMenuItem} from '../../types';\n\n\ninterface IOrderState {\n  ingredients: TMenuItem[];\n  isLoading: boolean;\n  error: SerializedError | null;\n  number: number | null,\n  name: string | null,\n}\n\ninterface IOrder {\n  name: string;\n  order: {\n    number: number;\n  };\n  success: string;\n}\n\nconst initialState: IOrderState = {\n  ingredients: [],\n  isLoading: false,\n  error: null,\n  number: null,\n  name: null,\n};\n\nexport const postOrder = createAsyncThunk(\n  'orders/postOrder',\n  async function (ingredients: TMenuItem[], {rejectWithValue, dispatch}) {\n    try {\n      const response = await api.postOrder(ingredients);\n\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      const data = await response.json();\n      return data as IOrder;\n\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst orderSlice = createSlice({\n  name: 'order',\n  initialState,\n  reducers: {\n    clearOrderDetails: (state) => {\n      state.ingredients = [];\n      state.isLoading = false;\n      state.error = null;\n      state.number = null;\n      state.name = null;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(postOrder.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.number = null;\n        state.name = null;\n      })\n      .addCase(postOrder.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.number = action.payload.order.number;\n        state.name = action.payload.name;\n      })\n      .addCase(postOrder.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n  },\n});\n\nexport const {clearOrderDetails} = orderSlice.actions;\nexport default orderSlice.reducer;\n","import {ConstructorElement, DragIcon} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React, {useRef} from 'react';\nimport {useAppDispatch} from '../../hooks/hooks';\nimport {TMenuItem} from '../../types';\nimport {useDrag, useDrop} from 'react-dnd';\nimport {useDispatch} from 'react-redux';\nimport {removeConstructorIngredient, swapIngredients} from '../../store/slices/burger-constructor-slice';\nimport {decreaseQuantity} from '../../store/slices/ingredients-slice';\n\nimport styles from './constructor-item.module.css';\n\n\ntype TConstructorItemProps = {\n  ingredient: TMenuItem;\n  index: number;\n  className?: string;\n};\n\nfunction ConstructorItem({ ingredient, index, className }: TConstructorItemProps): JSX.Element {\n\n  const dispatch = useAppDispatch();\n  const ref = useRef<HTMLLIElement>( null );\n\n  const [, drag] = useDrag( {\n    type: 'constructorIngredient',\n    item: {index},\n  });\n\n  const [, drop] = useDrop( {\n    accept: 'constructorIngredient',\n    hover: (item: {index: number}) => {\n      if ( !ref.current ) {\n        return;\n      }\n\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      dispatch(swapIngredients({from: dragIndex, to: hoverIndex}));\n      item.index = hoverIndex;\n    },\n  });\n\n  drag(drop(ref));\n\n  const onIngredientRemove = (ingredient: TMenuItem) => {\n    return () => {\n      dispatch(removeConstructorIngredient(ingredient));\n      dispatch(decreaseQuantity(ingredient));\n    }\n  };\n\n  return (\n    <li key={ingredient.constructorId} className={className} ref={ref} id={ingredient._id}>\n      <div className={styles.drag}>\n        <DragIcon type=\"primary\" />\n      </div>\n      <div className={styles.element}>\n        <ConstructorElement\n          text={ingredient.name}\n          price={ingredient.price}\n          thumbnail={ingredient.image}\n          handleClose={onIngredientRemove(ingredient)}\n        />\n      </div>\n    </li>\n  )\n}\n\n\nexport default ConstructorItem;\n","import React, {useEffect} from 'react';\nimport cn from 'classnames';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {clearOrder} from '../../store/slices/burger-constructor-slice';\nimport {clearOrderDetails} from '../../store/slices/order-slice';\nimport ErrorAlert from '../error-alert/error-alert';\nimport Spinner from '../spinner/spinner';\n\nimport styles from './order-details.module.css';\n\n\ntype TOrderDetails = {\n  onClose: () => void;\n};\n\nfunction OrderDetails({ onClose }: TOrderDetails): JSX.Element {\n\n  const dispatch = useAppDispatch();\n  const number = useAppSelector((state) => state.order.number);\n  const isLoading = useAppSelector((state) => state.order.isLoading);\n  const error = useAppSelector((state) => state.order.error);\n\n  const numberClasses = cn('text text_type_digits-large', styles.number);\n  const idClasses = cn('text text_type_main-medium', styles.id);\n  const notificationClasses = cn('text text_type_main-default',  styles.notification);\n  const noteClasses = cn('text text_type_main-default text_color_inactive', styles.note);\n\n  useEffect(() => {\n    return () => {\n      dispatch(clearOrderDetails());\n      if (!error) {\n        dispatch(clearOrder());\n      }\n      onClose();\n    }\n  }, []);\n\n\n  return (\n    <>\n      {isLoading && <Spinner className={styles.spinner} />}\n      {error && <ErrorAlert />}\n      {!isLoading && !error && number && (\n        <div className={styles.wrapper}>\n          <p className={numberClasses}>{number}</p>\n          <p className={idClasses}> </p>\n          <button className={styles.button} onClick={onClose} aria-label=\"  \"/>\n          <p className={notificationClasses}>   </p>\n          <p className={noteClasses}>    </p>\n        </div>\n      )}\n    </>\n  )\n}\n\n\nexport default OrderDetails;\n","import React, {CSSProperties} from 'react';\nimport { useDrop } from 'react-dnd';\nimport cn from 'classnames';\nimport {\n  ConstructorElement,\n  Button\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport {useLocation, useHistory} from 'react-router-dom';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {addBun, addIngredient, clearOrder} from '../../store/slices/burger-constructor-slice';\nimport {addBunQuantity, clearQuantities, increaseQuantity} from '../../store/slices/ingredients-slice';\nimport {postOrder} from '../../store/slices/order-slice';\nimport {TMenuItem} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport ConstructorItem from '../constructor-item/constructor-item';\nimport Modal from '../modal/modal';\nimport OrderDetails from '../order-details/order-details';\nimport Price from '../price/price';\n\nimport styles from './burger-constructor.module.css';\n\n\nfunction BurgerConstructor(): JSX.Element {\n\n  const dispatch = useAppDispatch();\n  const isAuthenticated = useAppSelector((state) => state.user.isAuthenticated);\n  const location = useLocation();\n  const history = useHistory();\n\n  const [isModalVisible, setModalIsVisible] = React.useState<boolean>(false);\n\n  const handleModalClose = React.useCallback(() => setModalIsVisible(false), []);\n  const handleModalOpen = React.useCallback(() => setModalIsVisible(true), []);\n\n  const bunClasses = cn(styles.list_item, styles.bun, styles.element);\n  const priceClasses = cn('text_type_digits-medium', styles.price);\n  const instructionClasses = cn('text text_type_main-medium', styles.instruction);\n\n  const { ingredients, bun, totalPrice } = useAppSelector((state: any) => state.burgerConstructor);\n  const isDisabled = ingredients.length === 0 || !bun;\n  const buttonStyle = isDisabled ? {opacity: '0.5', pointerEvents: 'none'} as CSSProperties : undefined;\n\n  const onDrop = (item: TMenuItem) => {\n    if (item.type !== 'bun') {\n      dispatch(addIngredient(item));\n      dispatch(increaseQuantity(item));\n      return;\n    }\n    dispatch(addBun(item));\n    dispatch(addBunQuantity(item));\n  };\n\n  const [{isHover}, dropTarget] = useDrop({\n    accept: 'ingredient',\n    drop(item: TMenuItem) {\n      onDrop(item);\n      return item;\n    },\n    collect: monitor => ({\n      isHover: monitor.isOver(),\n    })\n  });\n\n  const hoverStyles = isHover ? {border: 'dashed #4C4CFF'} : {border: 'dashed transparent'};\n\n  const onOrderPlacement = () => {\n    if (!isAuthenticated) {\n      history.push({pathname: AppRoutes.LOGIN, state: {from: location}});\n    } else {\n      const orderIngredients = [...ingredients.map((item: TMenuItem) => item._id), bun._id, bun._id];\n      // @ts-ignore\n      dispatch(postOrder(orderIngredients))\n        .then(() => {\n          dispatch(clearQuantities());\n          dispatch(clearOrder());\n        })\n      handleModalOpen();\n    }\n  };\n\n  return (\n    <>\n      {\n        isModalVisible && (\n        <Modal onClose={handleModalClose}>\n          <OrderDetails onClose={handleModalClose} />\n        </Modal>)\n      }\n      <section className={styles.section}>\n        <h2 className=\"visually-hidden\"> :</h2>\n        {ingredients.length === 0 && !bun && (\n          <p className={instructionClasses}>  </p>\n        )}\n        <div className={styles.wrapper} ref={dropTarget} style={hoverStyles} id='dropTarget'>\n          <div className={bunClasses} id='topBun'>\n            {\n              bun && (\n                <ConstructorElement\n                  type=\"top\"\n                  isLocked={true}\n                  text={`${bun.name} ()`}\n                  price={bun.price}\n                  thumbnail={bun.image}\n                />\n              )\n            }\n          </div>\n            <ul className={styles.list}>\n              {ingredients.length > 0 &&\n                ingredients.map((ingredient: TMenuItem, index: number) =>\n                  <ConstructorItem\n                    ingredient={ingredient}\n                    index={index}\n                    key={ingredient.constructorId}\n                    className={styles.list_item}\n                  />\n              )}\n            </ul>\n          <div className={bunClasses} id='bottomBun'>\n            {\n              bun && (\n                <ConstructorElement\n                  type=\"bottom\"\n                  isLocked={true}\n                  text={`${bun.name} ()`}\n                  price={bun.price}\n                  thumbnail={bun.image}\n                />\n              )\n            }\n          </div>\n        </div>\n        <div className={styles.price_wrapper}>\n          <Price price={totalPrice} className={priceClasses} />\n          <div style={buttonStyle}>\n            <Button type=\"primary\" size=\"large\" onClick={onOrderPlacement}>\n               \n            </Button>\n          </div>\n        </div>\n      </section>\n    </>\n  )\n}\n\n\nexport default BurgerConstructor;\n","import {createSlice, PayloadAction} from '@reduxjs/toolkit';\nimport {TABS} from '../../utils/constants';\n\ninterface ITabsState {\n  activeTab: string;\n}\n\nconst initialState: ITabsState = {\n  activeTab: TABS.bun,\n};\n\nconst tabSlice = createSlice({\n  name: 'tab',\n  initialState,\n  reducers: {\n    setActiveTab: (state, action: PayloadAction<string>) => {\n      if (state.activeTab !== action.payload) {\n        state.activeTab = action.payload;\n      }\n    },\n    setDefault: (state) => {\n      state.activeTab = TABS.bun;\n    }\n  }\n});\n\n\nexport const {setActiveTab, setDefault} = tabSlice.actions;\nexport default tabSlice.reducer;\n","import React from 'react';\nimport cn from 'classnames';\nimport {Counter as CounterIcon} from '@ya.praktikum/react-developer-burger-ui-components';\n\n\ntype TCounterProps = {\n  className?: string;\n  count: number;\n  size?: 'small' | 'default' | undefined;\n};\n\n\nfunction Counter({ className, count, size }: TCounterProps): JSX.Element {\n  const classes = cn(className);\n  return (\n    <div className={classes}>\n      <CounterIcon count={count} size={size}/>\n    </div>\n  );\n}\n\n\nexport default Counter;\n","import React from 'react';\nimport cn from 'classnames';\nimport {TMenuItem} from '../../types';\nimport Counter from '../counter/counter';\nimport Price from '../price/price';\nimport { useDrag } from \"react-dnd\";\n\nimport styles from './menu-item.module.css';\n\n\ntype TMenuItemProps = {\n  className?: string;\n  item: TMenuItem;\n};\n\nfunction MenuItem({ className, item }: TMenuItemProps): JSX.Element {\n\n  const classes = cn(styles.article, className);\n  const nameClasses = cn('text text_type_main-default', styles.name);\n\n  const { image, name, price, count } = item;\n\n\n  const [, dragRef] = useDrag({\n    type: 'ingredient',\n    item: item,\n  });\n\n  return (\n    <>\n      <article className={classes} ref={dragRef}>\n        { (count && count > 0) && <Counter className={styles.counter} count={count} />}\n        <div className={styles.image_wrapper}>\n          <img src={image} alt={name} className={styles.image}/>\n        </div>\n        <Price className={styles.price} price={price} />\n        <p className={nameClasses}>{name}</p>\n      </article>\n    </>\n  );\n}\n\n\nexport default React.memo(MenuItem);\n","import React, {useRef} from 'react';\nimport cn from 'classnames';\nimport {useLocation, generatePath} from 'react-router';\nimport {Link} from 'react-router-dom';\nimport {TMenuItem} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport MenuItem from '../menu-item/menu-item';\n\nimport styles from './menu-sublist.module.css';\n\n\ntype Ref = HTMLDivElement;\n\ntype TMenuSublistProps = {\n  className?: string;\n  title: string;\n  items: Array<TMenuItem>;\n  data: string;\n};\n\nconst MenuSublist = React.forwardRef<Ref, TMenuSublistProps>(\n  (\n    {\n      className,\n      title,\n      items,\n      data\n    }, ref): JSX.Element => {\n\n  const classes = cn(className, styles.list);\n  const titleClasses = cn('text text_type_main-medium', styles.title);\n\n  const titleRef = useRef<HTMLHeadingElement>(null);\n\n  let location = useLocation();\n\n  return (\n    <div ref={ref}>\n      <h3 ref={titleRef} data-title={data} className={titleClasses} >{title}</h3>\n      <ul className={classes}>\n        {items.map((item) => (\n          <Link\n            key={item._id}\n            to={{\n              pathname: generatePath(AppRoutes.INGREDIENTS, {id: item._id}),\n              state: { background: location }\n            }}\n          >\n            <MenuItem item={item} />\n          </Link>\n          ))}\n      </ul>\n    </div>\n  )\n});\n\n\nexport default MenuSublist;\n","import React, {useMemo} from 'react';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {setActiveTab} from '../../store/slices/tab-slice';\nimport {mapItemsByType} from '../../utils/common';\nimport {TABS} from '../../utils/constants';\nimport MenuSublist from '../menu-sublist/menu-sublist';\n\nimport styles from './menu-list.module.css';\n\nfunction MenuList(): JSX.Element {\n\n  const ingredients = useAppSelector((state) => state.ingredients.ingredients);\n  const itemsByType = useMemo(() => mapItemsByType(ingredients), [ingredients]);\n  const dispatch = useAppDispatch();\n\n  const containerRef = React.useRef<HTMLElement>(null);\n\n  const bunsRef = React.useRef<HTMLDivElement>(null);\n  const saucesRef = React.useRef<HTMLDivElement>(null);\n  const mainRef = React.useRef<HTMLDivElement>(null);\n\n  const sublistRefs = {\n    bun: bunsRef,\n    main: mainRef,\n    sauce: saucesRef,\n  };\n\n  const handleScroll = () => {\n    if (bunsRef.current && mainRef.current && saucesRef.current && containerRef.current) {\n      const containerToTop = containerRef.current.getBoundingClientRect().top;\n\n      if (\n        bunsRef.current.getBoundingClientRect().top <= containerToTop &&\n        bunsRef.current.getBoundingClientRect().top > 0\n      ) {\n        dispatch(setActiveTab(TABS.bun));\n      }\n      else if (\n        mainRef.current.getBoundingClientRect().top <= containerToTop &&\n        mainRef.current.getBoundingClientRect().top > 0\n      ) {\n        dispatch(setActiveTab(TABS.main));\n      }\n      else if (\n        saucesRef.current.getBoundingClientRect().top <= containerToTop &&\n        saucesRef.current.getBoundingClientRect().top > 0\n      ) {\n        dispatch(setActiveTab(TABS.sauce));\n      }\n    }\n  };\n\n  return (\n    <section className={styles.menu} ref={containerRef} onScroll={handleScroll}>\n\n      <h2 className=\"visually-hidden\"> </h2>\n      {Array\n        .from(itemsByType.keys())\n        .map((title: keyof typeof TABS) => <MenuSublist\n          ref={sublistRefs[title]}\n          data={title}\n          key={title}\n          title={TABS[title]}\n          items={itemsByType.get(title)}\n        />)}\n    </section>\n  );\n}\n\n\nexport default MenuList;\n","import React from 'react';\nimport cn from 'classnames';\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {setActiveTab} from '../../store/slices/tab-slice';\nimport {TABS} from '../../utils/constants';\n\nimport styles from './tab-bar.module.css';\n\n\ntype TTabBarProps = {\n  className?: string;\n};\n\nfunction TabBar({ className }: TTabBarProps): JSX.Element {\n\n  const dispatch = useAppDispatch();\n\n  const tabClasses = cn(className, styles.wrapper);\n\n  const activeTab = useAppSelector((state) => state.tab.activeTab);\n\n  const onTabClick = (item: string) => {\n    dispatch(setActiveTab(item));\n  };\n\n  return (\n    <div className={tabClasses}>\n      {\n        Object.values(TABS).map((item: string) =>\n          <Tab key={item} value={item} active={activeTab === item} onClick={onTabClick}>\n            {item}\n          </Tab>)\n      }\n    </div>\n  )\n}\n\n\nexport default TabBar;\n","import React from 'react';\nimport MenuList from '../menu-list/menu-list';\nimport TabBar from '../tab-bar/tab-bar';\n\nimport styles from './burger-ingredients.module.css';\n\n\nfunction BurgerIngredients(): JSX.Element {\n\n  return(\n    <section className={styles.menu}>\n      <h2 className=\"visually-hidden\"> </h2>\n      <TabBar className={styles.tab} />\n      <MenuList />\n    </section>\n  )\n}\n\n\nexport default BurgerIngredients;\n","import cn from 'classnames';\nimport React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport BurgerConstructor from '../../components/burger-constructor/burger-constructor';\nimport BurgerIngredients from '../../components/burger-ingredients/burger-ingredients';\n\nimport styles from './main-wrapper.module.css';\n\n\nfunction MainWrapper(): JSX.Element {\n\n  const titleClasses = cn('text text_type_main-large', styles.title);\n\n  return (\n    <main className={styles.main}>\n      <h1 className={titleClasses}> </h1>\n      <div className={styles.menu}>\n        <DndProvider backend={HTML5Backend}>\n          <BurgerIngredients />\n          <BurgerConstructor />\n        </DndProvider>\n      </div>\n    </main>\n  )\n}\n\n\nexport default MainWrapper;\n","import React from 'react';\nimport MainWrapper from './main-wrapper';\n\nimport styles from './index.module.css';\n\n\nfunction MainPage(): JSX.Element {\n\n  return (\n    <>\n      <div className={styles.wrapper}>\n        <MainWrapper />\n      </div>\n    </>\n  )\n}\n\n\nexport default MainPage;\n","import {createSlice, createAsyncThunk, SerializedError} from '@reduxjs/toolkit';\nimport {deleteCookie, setCookie, setSession} from '../../utils/common';\nimport api from '../../services/api';\n\n\ninterface IUserState {\n  isLoading: boolean;\n  error: SerializedError | null;\n  success: boolean;\n  email: string;\n  name: string;\n  isAuthenticated: boolean;\n  message: string | null;\n}\n\nconst initialState: IUserState = {\n  isLoading: false,\n  error: null,\n  success: false,\n  email: '',\n  name: '',\n  isAuthenticated: false,\n  message: null,\n};\n\nexport const registerUser = createAsyncThunk(\n  'user/registerUser',\n  async function (\n    {name, password, email}: {name: string, password: string, email: string},\n    {rejectWithValue}) {\n\n    const user = {email, password, name};\n\n    try {\n      const response = await api.registerUser(user);\n\n      if (!response.ok) {\n        throw new Error('Server error, try again');\n      }\n\n      const data = await response.json();\n      let authToken = data.accessToken.split('Bearer ')[1];\n      response.headers.forEach(header => {\n        if (header.indexOf('Bearer') === 0) {\n          authToken = header.split('Bearer ')[1];\n        }\n      });\n\n      if (authToken) {\n        setCookie('accessToken', authToken, {expires: 1200});\n      }\n\n      return data;\n\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const login = createAsyncThunk(\n  'user/login',\n  async ({email, password}: {email: string, password: string},\n  {rejectWithValue}) => {\n\n    try {\n      const response = await api.login(email, password);\n\n      if (!response.ok) {\n        throw new Error('Server error, try again');\n      }\n\n      const data = await response.json();\n      setSession(data);\n\n      return data;\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n\nexport const logout = createAsyncThunk(\n  'user/logout',\n  async function(_, {rejectWithValue}) {\n\n    try {\n      const response = await api.logout()\n\n      if (!response.ok) {\n        throw new Error('Server error, try again');\n      }\n\n      deleteCookie('accessToken');\n      deleteCookie('refreshToken');\n\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n)\n\nexport const updateProfile = createAsyncThunk(\n  'user/updateProfile',\n  async function(\n    {email, name, password}: {email: string, name: string, password: string},\n    {rejectWithValue}) {\n\n    try {\n      let response = await api.updateUserInfo(name, email, password);\n      if (response.status === 403) {\n        const tokenResponse = await api.refreshToken();\n\n        if (!tokenResponse.ok) {\n          throw new Error(tokenResponse.statusText);\n        }\n\n        const tokenData = await tokenResponse.json();\n        setSession(tokenData);\n\n        response = await api.updateUserInfo(name, email, password);\n      }\n\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      const data = await response.json();\n      return data;;\n    }\n\n    catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n)\n\nexport const getUserData = createAsyncThunk(\n  'user/getData',\n  async function(_,\n    {rejectWithValue}) {\n    try {\n      let response = await api.getUserInfo();\n\n      if (response.status === 403) {\n        const tokenResponse = await api.refreshToken();\n\n        if (!tokenResponse.ok) {\n          throw new Error(tokenResponse.statusText);\n        }\n\n        const tokenData = await tokenResponse.json();\n        setSession(tokenData);\n\n        response = await api.getUserInfo();\n      }\n\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n\n      const data = await response.json();\n\n      return data;\n    } catch (error: any) {\n      return rejectWithValue(error.message);\n    }\n  }\n)\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(registerUser.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n        state.isAuthenticated = false;\n        state.name = '';\n        state.email = '';\n      })\n      .addCase(registerUser.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.success = true;\n        state.name = action.payload.name;\n        state.email = action.payload.email;\n        state.isAuthenticated = true;\n      })\n      .addCase(registerUser.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n        state.isAuthenticated = false;\n        state.email = '';\n        state.name = '';\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.success = true;\n        state.name = action.payload.user.name;\n        state.email = action.payload.user.email;\n        state.isAuthenticated = true;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n      .addCase(logout.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n      })\n      .addCase(logout.fulfilled, (state) => {\n        state.isLoading = false;\n        state.success = true;\n        state.name = '';\n        state.email = '';\n        state.isAuthenticated = false;\n      })\n      .addCase(logout.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n      .addCase(updateProfile.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n      })\n      .addCase(updateProfile.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.success = true;\n        state.name = action.payload.user.name;\n        state.email = action.payload.user.email;\n      })\n      .addCase(updateProfile.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as SerializedError;\n      })\n      .addCase(getUserData.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n        state.success = false;\n      })\n      .addCase(getUserData.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.success = true;\n        state.name = action.payload.user.name;\n        state.email = action.payload.user.email;\n        state.isAuthenticated = true;\n      })\n      .addCase(getUserData.rejected, (state) => {\n        state.isLoading = false;\n        state.isAuthenticated = false;\n      })\n  },\n});\n\nexport default userSlice.reducer;\n","import cn from 'classnames';\nimport React from 'react';\nimport {NavLink, useHistory} from 'react-router-dom';\nimport {useAppDispatch} from '../../hooks/hooks';\nimport {logout} from '../../store/slices/user-slice';\nimport {AppRoutes} from '../../utils/constants';\nimport styles from './profile-nav.module.css';\n\n\nfunction ProfileNav() {\n\n  const linkClasses = cn('text text_type_main-medium text_color_inactive', styles.link);\n  const noteClasses = cn('text text_type_main-small text_color_inactive', styles.note);\n\n  const dispatch = useAppDispatch();\n  const history = useHistory();\n\n  const onLogout = () => {\n    dispatch(logout())\n      .then(() => {\n        history.replace({ pathname: AppRoutes.LOGIN });\n      });\n  };\n\n  return (\n    <div className={styles.nav}>\n      <ul className={styles.list}>\n        <li className={styles.item}>\n          <NavLink\n            to={AppRoutes.PROFILE}\n            exact={true}\n            className={linkClasses}\n            activeClassName={styles.active}\n          >\n            \n          </NavLink>\n        </li>\n        <li className={styles.item}>\n          <NavLink\n            to={AppRoutes.ORDERS}\n            className={linkClasses}\n            activeClassName={styles.active}\n          >\n             \n          </NavLink>\n        </li>\n        <li className={styles.item}>\n          <button onClick={onLogout} className={linkClasses}>\n            \n          </button>\n        </li>\n      </ul>\n      <p className={noteClasses}>\n            <br/>   \n      </p>\n    </div>\n  )\n}\n\n\nexport default ProfileNav;\n","import React, {useEffect} from 'react';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport wsActions from '../../store/action-types';\nimport ErrorAlert from '../../components/error-alert/error-alert';\nimport OrdersFeed from '../../components/orders-feed/orders-feed';\nimport ProfileNav from '../../components/profile-nav/profile-nav';\nimport Spinner from '../../components/spinner/spinner';\n\nimport styles from './profile-feed-page.module.css';\n\n\nfunction ProfileFeedPage() {\n\n  const dispatch = useAppDispatch();\n  const { isLoading, error } = useAppSelector((state) => state.user);\n  const {orders, error: wsError, wsConnected} = useAppSelector((state) => state.userFeed);\n\n  useEffect(() => {\n\n    dispatch(wsActions.wsInit.wsConnectionInit('getUserFeedOrders'));\n\n    return () => {\n      dispatch(wsActions.wsInit.wsConnectionClose());\n    }\n  }, [dispatch]);\n\n  return (\n    <div className={styles.wrapper}>\n      {(error || wsError) && <ErrorAlert />}\n      <main className={styles.main}>\n        {(isLoading || !wsConnected) && <Spinner className={styles.spinner}/>}\n        <ProfileNav />\n        {\n          !isLoading\n          && wsConnected\n          && !error\n          && !wsError\n          && <OrdersFeed orders={orders} />\n        }\n      </main>\n    </div>\n  )\n}\n\n\nexport default ProfileFeedPage;\n","import {\n  Button,\n  EmailInput,\n  Input,\n  PasswordInput\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport cn from 'classnames';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {updateProfile} from '../../store/slices/user-slice';\nimport ErrorAlert from '../../components/error-alert/error-alert';\nimport Spinner from '../../components/spinner/spinner';\n\nimport styles from './profile-form.module.css';\n\n\nfunction ProfileForm(): JSX.Element {\n\n  const cancelClasses = cn('text text_type_main-small', styles.cancel);\n\n  const dispatch = useAppDispatch();\n\n  const { email, name, isLoading, error } = useAppSelector((state) => state.user);\n  const [emailValue, setEmailValue] = React.useState<string>(email);\n\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setEmailValue(evt.target.value)\n  };\n\n  const [passwordValue, setPasswordValue] = React.useState<string>('');\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordValue(evt.target.value)\n  };\n\n  const [nameValue, setNameValue] = React.useState<string>(name);\n  const onNameChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setNameValue(evt.target.value);\n  };\n\n  const onCancel = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    setEmailValue(email);\n    setNameValue(name);\n  };\n\n  const onFormSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(updateProfile({email: emailValue, name: nameValue, password: passwordValue}));\n  };\n\n  return (\n    <>\n      {isLoading && (<Spinner className={styles.spinner}/>)}\n      {error && <ErrorAlert />}\n      {!isLoading && (\n        <form className={styles.form} onSubmit={onFormSubmit}>\n          <Input\n            type=\"text\"\n            placeholder=\"\"\n            onChange={onNameChange}\n            value={nameValue}\n            name=\"name\"\n            icon=\"EditIcon\"\n            error={false}\n            errorText=\"\"\n            size=\"default\"\n          />\n          <EmailInput\n            onChange={onEmailChange}\n            value={emailValue}\n            name=\"email\"\n            size=\"default\"\n          />\n          <PasswordInput\n            onChange={onPasswordChange}\n            value={passwordValue}\n            name=\"password\"\n            size=\"default\"\n          />\n          <div>\n            <button className={cancelClasses} onClick={onCancel}></button>\n            <Button></Button>\n          </div>\n        </form>\n      )}\n    </>\n  )\n}\n\n\nexport default ProfileForm;\n","import React from 'react';\nimport {useAppSelector} from '../../hooks/hooks';\nimport ErrorAlert from '../../components/error-alert/error-alert';\nimport ProfileNav from '../../components/profile-nav/profile-nav';\nimport Spinner from '../../components/spinner/spinner';\nimport ProfileForm from './profile-form';\n\nimport styles from './index.module.css';\n\n\nfunction ProfilePage(): JSX.Element {\n\n\n  const { isLoading, error } = useAppSelector((state) => state.user);\n\n  return (\n    <div className={styles.wrapper}>\n      {error && <ErrorAlert />}\n      <main className={styles.main}>\n        {isLoading && <Spinner className={styles.spinner}/>}\n        <ProfileNav />\n        <ProfileForm />\n      </main>\n    </div>\n  )\n}\n\nexport default ProfilePage;\n","import {EmailInput, Input, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport {useAppDispatch} from '../../hooks/hooks';\nimport {registerUser} from '../../store/slices/user-slice';\nimport Form from '../../components/form/form';\nimport cn from 'classnames';\n\nimport styles from './registration-form.module.css';\n\n\ntype TRegistrationFormProps = {\n  className?: string;\n};\n\n\nfunction RegistrationForm({ className }: TRegistrationFormProps): JSX.Element {\n\n  const formClasses = cn(styles.form, className);\n\n  const dispatch = useAppDispatch();\n\n  const [emailValue, setEmailValue] = React.useState<string>('');\n\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setEmailValue(evt.target.value)\n  };\n\n  const [passwordValue, setPasswordValue] = React.useState<string>('');\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordValue(evt.target.value)\n  };\n\n  const [nameValue, setNameValue] = React.useState<string>('');\n  const onNameChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setNameValue(evt.target.value);\n  };\n\n  const onSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(registerUser({name: nameValue, password: passwordValue, email: emailValue}));\n  };\n\n  return (\n    <Form\n      legend=\"\"\n      buttonText=\"\"\n      className={formClasses}\n      onFormSubmit={onSubmit}\n    >\n      <Input\n        type=\"text\"\n        placeholder=\"\"\n        onChange={onNameChange}\n        value={nameValue}\n        name=\"name\"\n        icon=\"EditIcon\"\n        error={false}\n        errorText=\"\"\n      />\n      <EmailInput\n        onChange={onEmailChange}\n        value={emailValue}\n        name=\"email\"\n      />\n      <PasswordInput\n        onChange={onPasswordChange}\n        value={passwordValue}\n        name=\"password\"\n        size=\"default\"\n      />\n    </Form>\n  )\n}\n\n\nexport default RegistrationForm;\n","import React from 'react';\nimport {Link, Redirect, useLocation} from 'react-router-dom';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {TLocationState} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport RegistrationForm from './registration-form';\nimport styles from './index.module.css';\n\n\nfunction RegistrationPage(): JSX.Element {\n\n  const isAuthenticated = useAppSelector((state) => state.user.isAuthenticated);\n  const { state } = useLocation<TLocationState>();\n\n  const SignInLink = () => (\n    <p className=\"text text_type_main-default text_color_inactive\">\n       ?&ensp;\n      <Link to={AppRoutes.FORGOT_PASSWORD} className={styles.link}>\n         \n      </Link>\n    </p>\n  );\n\n  return (\n    <>\n      {\n        isAuthenticated\n        && <Redirect to={state?.from || AppRoutes.ROOT } />\n      }\n      <div className={styles.wrapper}>\n        <main className={styles.main}>\n          <RegistrationForm className={styles.form}/>\n          <SignInLink />\n        </main>\n      </div>\n    </>\n  )\n}\n\n\nexport default RegistrationPage;\n","import {Input, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport {useAppDispatch} from '../../hooks/hooks';\nimport {updatePassword} from '../../store/slices/password-slice';\nimport Form from '../../components/form/form';\n\n\nfunction ResetPasswordForm(): JSX.Element {\n\n  const dispatch = useAppDispatch();\n\n  const [password, setPassword] = React.useState<string>('');\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(evt.target.value)\n  };\n\n  const [token, setToken] = React.useState<string>('');\n  const onTokenChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setToken(evt.target.value)\n  };\n\n  const onSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(updatePassword({password, token}));\n  };\n\n  return (\n    <Form legend={' '} buttonText={''} onFormSubmit={onSubmit}>\n      <PasswordInput\n        onChange={onPasswordChange}\n        value={password}\n        name=\"password\"\n        size=\"default\"\n      />\n      <Input\n        type=\"text\"\n        placeholder=\"   \"\n        onChange={onTokenChange}\n        value={token}\n        name=\"name\"\n        icon=\"EditIcon\"\n        error={false}\n        errorText=\"\"\n        size=\"default\"\n      />\n    </Form>\n  )\n}\n\n\nexport default ResetPasswordForm;\n","import React, {useEffect} from 'react';\nimport { Redirect, useHistory, useLocation } from 'react-router-dom';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {TLocationState} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport PasswordPageWrapper from '../../components/password-page-wrapper/password-page-wrapper';\nimport ResetPasswordForm from './reset-password-form';\n\n\nfunction ResetPasswordPage(): JSX.Element {\n\n  const history = useHistory();\n  const {state} = useLocation<TLocationState>();\n\n  const isAuthenticated = useAppSelector((state) => state.user.isAuthenticated);\n  const {passwordIsChanged, isEmailConfirmed } = useAppSelector((state) => state.password);\n\n  useEffect(() => {\n    if (passwordIsChanged) {\n      history.replace({pathname: AppRoutes.LOGIN});\n    }\n  }, [passwordIsChanged]);\n\n  return (\n    <>\n      {\n        isAuthenticated\n        && <Redirect to={AppRoutes.ROOT} />\n      }\n      {\n        (!isEmailConfirmed || state?.from !== AppRoutes.FORGOT_PASSWORD)\n        && <Redirect to={{pathname: AppRoutes.FORGOT_PASSWORD}} />\n      }\n      <PasswordPageWrapper >\n        <ResetPasswordForm />\n      </PasswordPageWrapper>\n    </>\n  )\n}\n\n\nexport default ResetPasswordPage;\n","import {EmailInput, PasswordInput} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport {useAppDispatch} from '../../hooks/hooks';\nimport {login} from '../../store/slices/user-slice';\nimport Form from '../../components/form/form';\nimport cn from 'classnames';\n\nimport styles from './sign-in-form.module.css';\n\n\ntype TSIgnInFormProps = {\n  className?: string;\n};\n\nfunction SignInForm({ className }: TSIgnInFormProps): JSX.Element {\n\n  const dispatch = useAppDispatch();\n\n  const formClasses = cn(styles.form, className);\n\n  const [email, setEmail] = React.useState<string>('');\n\n  const onEmailChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(evt.target.value)\n  };\n\n  const [password, setPassword] = React.useState<string>('')\n  const onPasswordChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(evt.target.value)\n  };\n\n  const onSubmit = (evt: React.SyntheticEvent) => {\n    evt.preventDefault();\n    dispatch(login({email, password}));\n  };\n\n  return (\n    <Form legend=\"\" buttonText=\"\" className={formClasses} onFormSubmit={onSubmit}>\n      <EmailInput\n        onChange={onEmailChange}\n        value={email}\n        name=\"email\"\n      />\n      <PasswordInput\n        onChange={onPasswordChange}\n        value={password}\n        name=\"password\"\n        size=\"default\"\n      />\n    </Form>\n  )\n}\n\n\nexport default SignInForm;\n","import React from 'react';\nimport {Redirect, useLocation, Link} from 'react-router-dom';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {TLocationState} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport SignInForm from './sign-in-form';\nimport cn from 'classnames';\nimport styles from './index.module.css';\n\n\nfunction SignInPage(): JSX.Element {\n\n  const isAuthenticated = useAppSelector((state) => state.user.isAuthenticated);\n  const { state } = useLocation<TLocationState>();\n\n  const RegisterLink = (): JSX.Element => (\n    <p className={cn('text text_type_main-default text_color_inactive', styles.register)}>\n      &ensp;  ?&ensp;\n      <Link to={AppRoutes.REGISTER} className={styles.link}>\n        \n      </Link>\n    </p>\n  );\n\n  const ResetPasswordLink = (): JSX.Element => (\n    <p className=\"text text_type_main-default text_color_inactive\">\n       ?&ensp;\n      <Link to={AppRoutes.FORGOT_PASSWORD} className={styles.link}>\n         \n      </Link>\n    </p>\n  );\n\n  return (\n    <>\n      {\n        isAuthenticated\n        && <Redirect to={state?.from || AppRoutes.ROOT } />\n      }\n      <div className={styles.wrapper}>\n        <main className={styles.main}>\n          <SignInForm className={styles.form}/>\n          <RegisterLink />\n          <ResetPasswordLink />\n        </main>\n      </div>\n    </>\n  )\n}\n\nexport default SignInPage;\n","import React from 'react';\nimport {useAppSelector} from '../../hooks/hooks';\nimport {AppRoutes} from '../../utils/constants';\nimport {Route, Redirect, RouteProps} from 'react-router-dom';\n\n\nexport function ProtectedRoute({ children, ...rest }: RouteProps) {\n\n  const {isAuthenticated} = useAppSelector((state: any) => state.user);\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        isAuthenticated ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: AppRoutes.LOGIN,\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\n\nexport default ProtectedRoute;\n","import React, {useEffect} from 'react';\nimport {useHistory, useLocation} from 'react-router';\nimport { Switch, Route } from 'react-router-dom';\nimport {useAppDispatch, useAppSelector} from '../../hooks/hooks';\nimport {fetchIngredients} from '../../store/slices/ingredients-slice';\nimport {TLocationState} from '../../types';\nimport {AppRoutes} from '../../utils/constants';\nimport AppHeader from '../app-header/app-header';\nimport ErrorAlert from '../error-alert/error-alert';\nimport FeedOrderModal from '../feed-order-modal/feed-order-modal';\nimport IngredientModal from '../ingredient-modal/ingredient-modal';\nimport FeedOrderPage from '../../pages/feed-order-page/feed-order-page';\nimport FeedPage from '../../pages/feed-page/feed-page';\nimport ForgotPasswordPage from '../../pages/forgot-password-page';\nimport IngredientPage from '../../pages/ingredient-page/ingredient-page';\nimport MainPage from '../../pages/main-page';\nimport ProfileFeedPage from '../../pages/profile-feed-page/profile-feed-page';\nimport ProfilePage from '../../pages/profile-page';\nimport RegistrationPage from '../../pages/registration-page';\nimport ResetPasswordPage from '../../pages/reset-password-page';\nimport SignInPage from '../../pages/sign-in-page';\nimport ProtectedRoute from '../protected-route/protected-route';\nimport Spinner from '../spinner/spinner';\n\nimport styles from './app.module.css';\n\n\nfunction App(): JSX.Element {\n\n  const { isLoading, error } = useAppSelector((state) => state.user);\n  const dispatch = useAppDispatch();\n\n  const location = useLocation<TLocationState>();\n  const history = useHistory();\n  const background = (\n    history.action === 'PUSH'\n    || history.action === 'REPLACE'\n  ) && location.state\n    && location.state.background;\n\n  const onModalClose = () => {\n    history.goBack();\n  };\n\n  const totalPrice = useAppSelector((state) => state.burgerConstructor.totalPrice);\n\n  useEffect(() => {\n    if (totalPrice) {\n      return;\n    }\n    dispatch(fetchIngredients());\n  }, [dispatch]);\n\n  return (\n    <>\n      {isLoading && <Spinner className={styles.spinner} />}\n      {error && <ErrorAlert />}\n      {!isLoading && !error && (\n        <>\n          <AppHeader className={styles.header}/>\n          <Switch location={background || location}>\n            <Route path={AppRoutes.ROOT} exact>\n              <MainPage />\n            </Route>\n            <Route path={AppRoutes.LOGIN} exact>\n              <SignInPage />\n            </Route>\n            <Route path={AppRoutes.REGISTER} exact>\n              <RegistrationPage />\n            </Route>\n            <Route path={AppRoutes.FORGOT_PASSWORD} exact>\n              <ForgotPasswordPage />\n            </Route>\n            <Route path={AppRoutes.RESET_PASSWORD} exact>\n              <ResetPasswordPage />\n            </Route>\n            <Route path={AppRoutes.INGREDIENTS}>\n               <IngredientPage />\n            </Route>\n            <Route path={AppRoutes.FEED} exact>\n              <FeedPage />\n            </Route>\n            <Route path={AppRoutes.FEED_ORDER}>\n              <FeedOrderPage />\n            </Route>\n            <ProtectedRoute path={AppRoutes.ORDERS} exact>\n              <ProfileFeedPage />\n            </ProtectedRoute>\n            <ProtectedRoute path={AppRoutes.ORDERS_ORDER}>\n              <FeedOrderPage />\n            </ProtectedRoute>\n            <ProtectedRoute path={AppRoutes.PROFILE} exact>\n              <ProfilePage />\n            </ProtectedRoute>\n          </Switch>\n          {\n            background && (\n              <Route path={AppRoutes.INGREDIENTS}>\n                <IngredientModal onClose={onModalClose} />\n              </Route>\n            )\n          }\n          {\n            background && (\n              <Route path={AppRoutes.FEED_ORDER}>\n                <FeedOrderModal onClose={onModalClose} />\n              </Route>\n            )\n          }\n          {\n            background && (\n              <Route path={AppRoutes.ORDERS_ORDER}>\n                <FeedOrderModal onClose={onModalClose} />\n              </Route>\n            )\n          }\n        </>\n      )}\n    </>\n  )\n}\n\nexport default App;\n","import {BASE_SOCKET_URL, SocketRoutes} from '../utils/constants';\nimport {getCookie} from '../utils/common';\n\n\ninterface IWsService {\n  [k: string]: () => WebSocket;\n}\n\n\nconst wsService: IWsService = {\n  getAllFeedOrders: () => new WebSocket(`${BASE_SOCKET_URL}${SocketRoutes.ALL}`),\n  getUserFeedOrders: () => new WebSocket(`${BASE_SOCKET_URL}?token=${getCookie( 'accessToken')}`),\n};\n\n\nexport default wsService;\n","import {AnyAction, MiddlewareAPI} from '@reduxjs/toolkit';\nimport wsActions from '../action-types/index';\nimport wsService from '../../services/ws-service';\n\n\nexport const socketMiddleware = () => {\n\n  return (store: MiddlewareAPI) => {\n    let socket: WebSocket | null = null;\n    let socketName = '';\n\n    return (next: (a: AnyAction) => void) => (action: AnyAction) => {\n      const { dispatch } = store;\n      const { type, payload } = action;\n\n      if (type === wsActions.wsInit.wsConnectionInit.toString()) {\n        socketName = payload;\n        socket = wsService[payload]();\n      }\n\n      if (type === wsActions.wsInit.wsConnectionClose.toString()) {\n        socket && socket.close();\n      }\n\n      if (socket) {\n        socket.onopen = (event) => {\n          dispatch(wsActions[socketName].onOpen(event.type));\n        };\n\n        socket.onmessage = (event) => {\n          const { data } = event;\n          const message = JSON.parse(data);\n\n          dispatch(wsActions[socketName].onMessage(message));\n        };\n\n        socket.onerror = (event) => {\n          dispatch(wsActions[socketName].onError(event.type));\n        };\n\n        socket.onclose = (event) => {\n          dispatch(wsActions[socketName].onClose(event.type));\n        };\n      }\n      next(action);\n    };\n  };\n};\n\n\nexport default socketMiddleware;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\n\ninterface IIngredientState {\n  imageLarge: string;\n  name: string;\n  calories: number | string;\n  proteins: number | string;\n  fat: number | string;\n  carbohydrates: number | string;\n}\n\nconst initialState: IIngredientState = {\n  imageLarge: '',\n  name: '',\n  calories: '',\n  proteins: '',\n  fat: '',\n  carbohydrates: '',\n};\n\nconst ingredientSlice = createSlice({\n  name: 'ingredient',\n  initialState,\n  reducers: {\n    setIngredient: (state, action: PayloadAction<IIngredientState>) => {\n      state.imageLarge = action.payload.imageLarge;\n      state.name = action.payload.name;\n      state.calories = action.payload.calories;\n      state.proteins = action.payload.proteins;\n      state.fat = action.payload.fat;\n      state.carbohydrates = action.payload.carbohydrates;\n    },\n    removeIngredient: (state) => {\n      state.imageLarge = '';\n      state.name = '';\n      state.calories = '';\n      state.proteins = '';\n      state.fat = '';\n      state.carbohydrates = '';\n    }\n  }\n});\n\n\nexport const {setIngredient, removeIngredient} = ingredientSlice.actions;\nexport default ingredientSlice.reducer;\n","import { combineReducers } from 'redux'\nimport burgerConstructorReducer from './burger-constructor-slice';\nimport ingredientsReducer from './ingredients-slice';\nimport orderReducer from './order-slice';\nimport ingredientReducer from './ingredient-slice';\nimport tabReducer from './tab-slice';\nimport passwordReducer from './password-slice';\nimport userReducer from './user-slice';\nimport feedReducer from './ws-orders-feed-slice';\nimport userFeedReducer from './ws-user-feed-slice';\n\nexport const rootReducer = combineReducers({\n  ingredients: ingredientsReducer,\n  burgerConstructor: burgerConstructorReducer,\n  order: orderReducer,\n  ingredient: ingredientReducer,\n  tab: tabReducer,\n  password: passwordReducer,\n  user: userReducer,\n  feed: feedReducer,\n  userFeed: userFeedReducer,\n});\n","import {configureStore} from '@reduxjs/toolkit';\nimport socketMiddleware from './middlewares/socket-middleware';\nimport {rootReducer} from './slices/root-reducer';\nimport {getUserData} from './slices/user-slice';\n\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(socketMiddleware()),\n});\n\nstore.dispatch(getUserData());\n\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/app/app';\nimport store from './store';\nimport {Router} from 'react-router';\nimport {createBrowserHistory} from 'history';\n\nimport './index.css';\n\n\nconst browserHistory = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router history={browserHistory}>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-card_wrapper__2lcRB\",\"info\":\"order-card_info__3wcFt\",\"bottom\":\"order-card_bottom__241X_\",\"images_wrapper\":\"order-card_images_wrapper__XMoez\",\"picture\":\"order-card_picture__2v7yW\",\"image\":\"order-card_image__1LH_h\",\"extra\":\"order-card_extra__2F8kt\",\"status\":\"order-card_status__3aQVL\",\"ready\":\"order-card_ready__1hR94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-constructor_section__3LLkY\",\"wrapper\":\"burger-constructor_wrapper__3y1z5\",\"list\":\"burger-constructor_list__2lXaw\",\"list_item\":\"burger-constructor_list_item__1WBAi\",\"bun\":\"burger-constructor_bun__12nX_\",\"price_wrapper\":\"burger-constructor_price_wrapper__adh_T\",\"instruction\":\"burger-constructor_instruction__2Y3pj\",\"price\":\"burger-constructor_price__Q5cGy\",\"element\":\"burger-constructor_element__10R7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"profile-nav_nav__2gyI3\",\"list\":\"profile-nav_list__38-7n\",\"item\":\"profile-nav_item__32OoQ\",\"link\":\"profile-nav_link__w_RXu\",\"note\":\"profile-nav_note__3FvE9\",\"active\":\"profile-nav_active__1TBx4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"main-nav_nav__39kU6\",\"nav_link\":\"main-nav_nav_link__1F6Yg\",\"active\":\"main-nav_active__3AHti\",\"burger\":\"main-nav_burger__2Yb_I\",\"list_icon\":\"main-nav_list_icon__2Rz2f\",\"text\":\"main-nav_text__2jRgI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders\":\"orders-status_orders__27ey5\",\"orders_wrapper\":\"orders-status_orders_wrapper__PRTSi\",\"title\":\"orders-status_title__17REQ\",\"list\":\"orders-status_list__22Wrq\",\"ready_item\":\"orders-status_ready_item__pvZPh\",\"in_progress_item\":\"orders-status_in_progress_item__4UF5E\",\"wrapper\":\"orders-status_wrapper__bKFza\",\"count\":\"orders-status_count__OqeKW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-details_wrapper__7rCGD\",\"number\":\"order-details_number__3zsJX\",\"id\":\"order-details_id__1POxV\",\"button\":\"order-details_button__1SUAw\",\"notification\":\"order-details_notification__3vwhU\",\"note\":\"order-details_note__1kCj6\",\"spinner\":\"order-details_spinner__2lm5V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"menu-item_article__-jgqn\",\"image_wrapper\":\"menu-item_image_wrapper__3HwIC\",\"image\":\"menu-item_image__3xsXD\",\"price\":\"menu-item_price__2KS5q\",\"counter\":\"menu-item_counter__2zblO\",\"name\":\"menu-item_name__3VDcM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"sign-in-page_wrapper__idXSe\",\"main\":\"sign-in-page_main__Atq7c\",\"form\":\"sign-in-page_form__1soJ6\",\"link\":\"sign-in-page_link__1YQcY\",\"login\":\"sign-in-page_login__1VrT0\",\"register\":\"sign-in-page_register__1O851\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"wrapper\":\"app-header_wrapper__ECTu6\",\"nav\":\"app-header_nav__1_idE\",\"logo\":\"app-header_logo__zVEfY\",\"profile\":\"app-header_profile__2xjkN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"user-nav_profile__T0KYa\",\"profile_icon\":\"user-nav_profile_icon__1jNNO\",\"active\":\"user-nav_active__3R60L\",\"text\":\"user-nav_text__2ILSB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_wrapper\":\"ingredients-details_modal_wrapper__2EE33\",\"modal_img_wrapper\":\"ingredients-details_modal_img_wrapper__p4E0z\",\"title\":\"ingredients-details_title__2-ZvB\",\"table\":\"ingredients-details_table__XVkUj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed-page_main__3V9J_\",\"wrapper\":\"feed-page_wrapper__2Mpl7\",\"title\":\"feed-page_title__QjFzG\",\"spinner\":\"feed-page_spinner__Ei2p4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"password-page-wrapper_wrapper__21oOt\",\"main\":\"password-page-wrapper_main__1f-ld\",\"login\":\"password-page-wrapper_login__1JaN3\",\"password\":\"password-page-wrapper_password__3IatU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"registration-page_wrapper__38jEp\",\"main\":\"registration-page_main__1u6cg\",\"form\":\"registration-page_form__N923m\",\"link\":\"registration-page_link__ZZqYg\",\"login\":\"registration-page_login__195Xz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"close\":\"modal_close__1Iez6\",\"header\":\"modal_header__2iX3r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders\":\"orders-feed_orders__30478\",\"feed\":\"orders-feed_feed__3DYGV\",\"card\":\"orders-feed_card__3m5cb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main-wrapper_main__18-ry\",\"title\":\"main-wrapper_title__m7BTk\",\"menu\":\"main-wrapper_menu__2OVoM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"profile-feed-page_wrapper__hwZN-\",\"main\":\"profile-feed-page_main__2C-MA\",\"spinner\":\"profile-feed-page_spinner__IuxHR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"profile-form_form__16xwe\",\"cancel\":\"profile-form_cancel__3g2Aw\",\"spinner\":\"profile-form_spinner__g7Va3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"profile-page_wrapper__3BOC2\",\"main\":\"profile-page_main__1KMzn\",\"list\":\"profile-page_list__1rLD8\",\"item\":\"profile-page_item__1D8T3\",\"link\":\"profile-page_link__1DyXJ\",\"note\":\"profile-page_note__1V-dq\",\"active\":\"profile-page_active__3ebxy\",\"spinner\":\"profile-page_spinner__2hTz1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"logo_logo__2PBiY\",\"active\":\"logo_active__9ETSW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"picture\":\"ingredient-preview_picture__NY1KY\",\"image\":\"ingredient-preview_image__1vSOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__1Ljzh\",\"input__container\":\"form_input__container__1vRi_\",\"legend\":\"form_legend__1ojif\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient-page_wrapper__Qb9Z5\",\"details\":\"ingredient-page_details__2as-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drag\":\"constructor-item_drag__1yW5x\",\"element\":\"constructor-item_element__1XnN8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"menu-sublist_list__3SZYx\",\"title\":\"menu-sublist_title___ljUn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"burger-ingredients_menu__3KO37\",\"tab\":\"burger-ingredients_tab__1Ru1Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"app_spinner__3cGQw\",\"header\":\"app_header__3NHfP\"};"],"sourceRoot":""}